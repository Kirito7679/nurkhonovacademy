import{r as i,k as V,e as L,j as e,a6 as y,a7 as w,X as p,s as S,L as D,D as G,a8 as U}from"./vendor-BvlDnYZi.js";import{a as B}from"./index-DGEZIldP.js";import{u as F}from"./useDebounce-BRDij7Rz.js";import{S as h}from"./Skeleton-CgRre3ag.js";import{a as t,g,b as O}from"./courseUtils-Bo8LqfoL.js";const P=i.memo(function(){const{t:l}=V(),[f,v]=i.useState(""),d=F(f,500),[a,x]=i.useState(()=>localStorage.getItem("courses_statusFilter")||"all"),[o,j]=i.useState(()=>localStorage.getItem("courses_sortBy")||"title"),[r,N]=i.useState(()=>localStorage.getItem("courses_sortOrder")||"desc"),[n,m]=i.useState(()=>localStorage.getItem("courses_categoryFilter")||"all");i.useEffect(()=>{localStorage.setItem("courses_statusFilter",a)},[a]),i.useEffect(()=>{localStorage.setItem("courses_sortBy",o)},[o]),i.useEffect(()=>{localStorage.setItem("courses_sortOrder",r)},[r]),i.useEffect(()=>{localStorage.setItem("courses_categoryFilter",n)},[n]);const{data:E,isLoading:C}=L(["courses",d,a,n,o,r],async()=>{const s=new URLSearchParams;d&&s.append("search",d),a!=="all"&&s.append("status",a),s.append("sortBy",o),s.append("sortOrder",r);let c=(await B.get(`/courses?${s.toString()}`)).data.data||[];return n!=="all"&&(c=c.filter(T=>T.category===n)),c},{staleTime:5*60*1e3,cacheTime:10*60*1e3,refetchOnWindowFocus:!1}),b=E||[],I=s=>s.hasAccess?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:[e.jsx(G,{className:"h-3 w-3 mr-1 text-green-700"}),l("students.approved")]}):s.studentCourseStatus==="PENDING"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700 border border-yellow-200",children:l("students.pending")}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-600 border border-neutral-200",children:[e.jsx(U,{className:"h-3 w-3 mr-1"}),l("courses.locked",{defaultValue:"Заблокирован"})]}),A=s=>!s||s===0?"Бесплатно":`${s.toLocaleString("ru-RU")} UZS`,k=s=>s.subscriptionType==="FREE"?0:s.price30Days?s.price30Days:s.price3Months?s.price3Months:s.price6Months?s.price6Months:s.price1Year?s.price1Year:s.price||null;return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-6 md:mb-8",children:e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold text-gradient",children:l("courses.title")})}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400 pointer-events-none z-10"}),e.jsx("input",{type:"text",placeholder:l("courses.searchPlaceholder",{defaultValue:"Поиск курсов..."}),value:f,onChange:s=>v(s.target.value),className:"input-field pl-12 w-full"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none sm:min-w-[160px]",children:[e.jsx(w,{className:`h-5 w-5 ${a!=="all"?"text-primary-600":"text-neutral-400"} hidden md:block transition-colors`}),e.jsxs("select",{value:a,onChange:s=>x(s.target.value),className:`input-field flex-1 md:flex-none transition-all ${a!=="all"?"border-primary-400 bg-primary-50/50":""}`,children:[e.jsx("option",{value:"all",children:l("courses.allCourses",{defaultValue:"Все курсы"})}),e.jsx("option",{value:"approved",children:l("students.approved")}),e.jsx("option",{value:"pending",children:l("students.pending")}),e.jsx("option",{value:"locked",children:l("courses.locked",{defaultValue:"Заблокированные"})})]}),a!=="all"&&e.jsx("button",{onClick:()=>x("all"),className:"p-1.5 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors",title:"Сбросить фильтр",children:e.jsx(p,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none sm:min-w-[180px]",children:[e.jsxs("select",{value:n,onChange:s=>m(s.target.value),className:`input-field flex-1 sm:flex-none sm:min-w-[180px] transition-all ${n!=="all"?"border-primary-400 bg-primary-50/50":""}`,children:[e.jsx("option",{value:"all",children:l("courses.allCategories",{defaultValue:"Все категории"})}),e.jsx("option",{value:"LANGUAGE",children:t("LANGUAGE")}),e.jsx("option",{value:"BUSINESS",children:t("BUSINESS")}),e.jsx("option",{value:"IT",children:t("IT")}),e.jsx("option",{value:"DESIGN",children:t("DESIGN")}),e.jsx("option",{value:"MARKETING",children:t("MARKETING")}),e.jsx("option",{value:"FINANCE",children:t("FINANCE")}),e.jsx("option",{value:"HEALTH",children:t("HEALTH")}),e.jsx("option",{value:"EDUCATION",children:t("EDUCATION")}),e.jsx("option",{value:"OTHER",children:t("OTHER")})]}),n!=="all"&&e.jsx("button",{onClick:()=>m("all"),className:"p-1.5 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors",title:"Сбросить фильтр категории",children:e.jsx(p,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none sm:min-w-[200px]",children:[e.jsxs("select",{value:o,onChange:s=>j(s.target.value),className:"input-field flex-1 sm:flex-none sm:min-w-[150px]",children:[e.jsx("option",{value:"title",children:l("courses.sortByTitle",{defaultValue:"По названию"})}),e.jsx("option",{value:"lessons",children:l("courses.sortByLessons",{defaultValue:"По урокам"})})]}),e.jsx("button",{onClick:()=>N(r==="asc"?"desc":"asc"),className:`px-3 md:px-4 py-2 bg-white border border-neutral-300 rounded-lg text-neutral-700 hover:bg-primary-50 hover:border-primary-300 hover:text-primary-700 transition-all text-sm md:text-base flex-shrink-0 ${r==="asc"?"border-primary-400 bg-primary-50/50":""}`,title:r==="asc"?l("courses.sortAsc",{defaultValue:"По возрастанию"}):l("courses.sortDesc",{defaultValue:"По убыванию"}),children:r==="asc"?"↑":"↓"})]})]})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"mb-6 md:mb-8",children:e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl xl:text-5xl font-bold text-gradient",children:l("courses.title")})}),e.jsxs("div",{className:"flex flex-col gap-4 mb-6",children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400 pointer-events-none z-10"}),e.jsx("input",{type:"text",placeholder:l("courses.searchPlaceholder",{defaultValue:"Поиск курсов..."}),value:f,onChange:s=>v(s.target.value),className:"input-field pl-12 w-full"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none sm:min-w-[160px]",children:[e.jsx(w,{className:`h-5 w-5 ${a!=="all"?"text-primary-600":"text-neutral-400"} hidden md:block transition-colors`}),e.jsxs("select",{value:a,onChange:s=>x(s.target.value),className:`input-field flex-1 md:flex-none transition-all ${a!=="all"?"border-primary-400 bg-primary-50/50":""}`,children:[e.jsx("option",{value:"all",children:l("courses.allCourses",{defaultValue:"Все курсы"})}),e.jsx("option",{value:"approved",children:l("students.approved")}),e.jsx("option",{value:"pending",children:l("students.pending")}),e.jsx("option",{value:"locked",children:l("courses.locked",{defaultValue:"Заблокированные"})})]}),a!=="all"&&e.jsx("button",{onClick:()=>x("all"),className:"p-1.5 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors",title:"Сбросить фильтр",children:e.jsx(p,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none sm:min-w-[180px]",children:[e.jsxs("select",{value:n,onChange:s=>m(s.target.value),className:`input-field flex-1 sm:flex-none sm:min-w-[180px] transition-all ${n!=="all"?"border-primary-400 bg-primary-50/50":""}`,children:[e.jsx("option",{value:"all",children:l("courses.allCategories",{defaultValue:"Все категории"})}),e.jsx("option",{value:"LANGUAGE",children:t("LANGUAGE")}),e.jsx("option",{value:"BUSINESS",children:t("BUSINESS")}),e.jsx("option",{value:"IT",children:t("IT")}),e.jsx("option",{value:"DESIGN",children:t("DESIGN")}),e.jsx("option",{value:"MARKETING",children:t("MARKETING")}),e.jsx("option",{value:"FINANCE",children:t("FINANCE")}),e.jsx("option",{value:"HEALTH",children:t("HEALTH")}),e.jsx("option",{value:"EDUCATION",children:t("EDUCATION")}),e.jsx("option",{value:"OTHER",children:t("OTHER")})]}),n!=="all"&&e.jsx("button",{onClick:()=>m("all"),className:"p-1.5 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors",title:"Сбросить фильтр категории",children:e.jsx(p,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-1 sm:flex-none sm:min-w-[200px]",children:[e.jsxs("select",{value:o,onChange:s=>j(s.target.value),className:"input-field flex-1 sm:flex-none sm:min-w-[150px]",children:[e.jsx("option",{value:"title",children:l("courses.sortByTitle",{defaultValue:"По названию"})}),e.jsx("option",{value:"lessons",children:l("courses.sortByLessons",{defaultValue:"По урокам"})})]}),e.jsx("button",{onClick:()=>N(r==="asc"?"desc":"asc"),className:`px-3 md:px-4 py-2 bg-white border border-neutral-300 rounded-lg text-neutral-700 hover:bg-primary-50 hover:border-primary-300 hover:text-primary-700 transition-all text-sm md:text-base flex-shrink-0 ${r==="asc"?"border-primary-400 bg-primary-50/50":""}`,title:r==="asc"?l("courses.sortAsc",{defaultValue:"По возрастанию"}):l("courses.sortDesc",{defaultValue:"По убыванию"}),children:r==="asc"?"↑":"↓"})]})]})]})]})}),C?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6 lg:gap-8",children:Array.from({length:6}).map((s,u)=>e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx(h,{height:192,variant:"rectangular"}),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx(h,{height:24,className:"mb-2"}),e.jsx(h,{height:16,className:"mb-4 w-3/4"}),e.jsx(h,{height:16,width:100})]})]},u))}):b.length===0?e.jsxs("div",{className:"text-center py-12 animate-fade-scale",children:[e.jsx(S,{className:"mx-auto h-16 w-16 text-neutral-400 mb-4"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:l("courses.noCourses")}),d&&e.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:l("courses.tryDifferentSearch",{defaultValue:"Попробуйте изменить параметры поиска"})})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-4 md:gap-6 lg:gap-8",children:b.map((s,u)=>e.jsxs(D,{to:`/courses/${s.id}`,className:"card card-hover overflow-hidden group animate-fade-scale",style:{animationDelay:`${.1*u}s`},children:[s.thumbnailUrl&&e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:s.thumbnailUrl,alt:s.title||"Course thumbnail",loading:"lazy",className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500",onError:c=>{c.target.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-wrap gap-2 z-10",children:[g(s.language)&&e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-white/90 backdrop-blur-sm border border-white/20 shadow-sm",children:[e.jsx("span",{className:"mr-1",children:g(s.language).flag}),e.jsx("span",{children:g(s.language).label})]}),s.category&&e.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-md text-xs font-medium border ${O(s.category)} backdrop-blur-sm shadow-sm`,children:t(s.category)})]})]}),e.jsxs("div",{className:"p-5 md:p-6 lg:p-7",children:[e.jsx("div",{className:"flex flex-col gap-3 mb-3",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2",children:[e.jsx("h3",{className:"text-base sm:text-lg md:text-xl font-semibold text-neutral-900 group-hover:text-primary-600 transition-colors break-words flex-1 leading-tight",children:s.title}),e.jsx("div",{className:"flex-shrink-0",children:I(s)})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-neutral-100",children:[e.jsxs("div",{className:"flex items-center text-sm md:text-base text-neutral-500",children:[e.jsx(S,{className:"h-4 w-4 md:h-5 md:w-5 mr-2 text-primary-500"}),e.jsxs("span",{children:[s._count?.lessons||0," ",l("lessons.lessonsCount",{count:s._count?.lessons||0,defaultValue:"уроков"})]})]}),e.jsx("div",{className:"text-sm md:text-base font-semibold text-primary-600",children:A(k(s))})]})]})]},s.id))})]})});export{P as default};
