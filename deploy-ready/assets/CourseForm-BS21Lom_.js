import{k as je,ae as Ne,d as ye,u as ve,r as o,e as ee,f as x,V as ge,j as e,ap as we,aQ as se,aR as te,T as ae,aN as U,s as Ce,ag as ke,ah as Me,L as C,aS as Le,a6 as Te,af as De,$ as Se,a0 as Ve,aT as le,aU as re,aV as Ue,a1 as F,av as ie}from"./vendor-D-riqg-X.js";import{C as ne,a as u}from"./index-citKsecZ.js";import{E as Fe}from"./ErrorModal-CzR1kAop.js";const $e=Ve({title:F().min(1,"–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"),description:F().optional(),thumbnailUrl:F().url("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç URL").optional().or(ie("")),price:le().min(0).default(0),trialLessonId:F().uuid().optional().or(ie("")),isVisible:Ue().default(!0),language:re(["ru","en","uz","kk"]).default("ru"),subscriptionType:re(["FREE","TRIAL","PAID"]).optional(),trialPeriodDays:le().int().min(0).optional()});function Pe(){const{t}=je(),{id:n}=Ne(),k=ye(),M=ve(),c=!!n,[L,H]=o.useState(""),J=o.useRef(!1),{data:r,isLoading:oe}=ee(["course",n],async()=>(await u.get(`/courses/${n}`)).data.data,{enabled:c}),{data:de,refetch:$}=ee(["modules",n],async()=>(await u.get(`/modules/courses/${n}/modules`)).data.data||[],{enabled:c&&!!n}),[p,T]=o.useState(null),[D,h]=o.useState(""),[E,b]=o.useState(""),[f,j]=o.useState(0),[m,N]=o.useState("info"),[K,ce]=o.useState(new Set),[S,y]=o.useState(!1),[W,I]=o.useState({isOpen:!1,message:""}),[O,P]=o.useState({isOpen:!1,moduleId:null}),[me,R]=o.useState(!1),v=x(async s=>(await u.post("/courses",s)).data.data,{onSuccess:s=>{M.invalidateQueries("teacherCourses"),k(`/teacher/courses/${s?.id}/edit`)},onError:s=>{s.response?.status===403&&s.response?.data?.message?.includes("–æ–ø–ª–∞—Ç–∏—Ç—å")?k("/teacher/payment"):I({isOpen:!0,message:s.response?.data?.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫—É—Ä—Å–∞"})}}),A=x(async s=>(await u.put(`/courses/${n}`,s)).data.data,{onSuccess:()=>{M.invalidateQueries(["course",n]),M.invalidateQueries("teacherCourses")}}),Q=x(async s=>(await u.post(`/modules/courses/${n}/modules`,s)).data.data,{onSuccess:()=>{$(),h(""),b(""),j(0),T(null),y(!1)}}),z=x(async s=>(await u.put(`/modules/${p?.id}`,s)).data.data,{onSuccess:()=>{$(),h(""),b(""),j(0),T(null),y(!1)}}),ue=x(async s=>{await u.delete(`/modules/${s}`)},{onSuccess:()=>{$()}}),V=x(async()=>{await u.delete(`/courses/${n}`)},{onSuccess:()=>{M.invalidateQueries("teacherCourses"),k("/teacher/courses")}}),{register:i,handleSubmit:X,formState:{errors:l},reset:xe,watch:q}=ge({resolver:Se($e),defaultValues:{title:"",description:"",thumbnailUrl:"",price:0,trialLessonId:"",isVisible:!0,language:"ru",subscriptionType:void 0,trialPeriodDays:void 0}});o.useEffect(()=>{r&&c&&!J.current&&(xe({title:r.title,description:r.description||"",thumbnailUrl:r.thumbnailUrl||"",price:r.price,trialLessonId:r.trialLessonId||"",isVisible:r.isVisible!==void 0?r.isVisible:!0,language:r.language||"ru",subscriptionType:r.subscriptionType||void 0,trialPeriodDays:r.trialPeriodDays||void 0}),r.thumbnailUrl&&H(r.thumbnailUrl),J.current=!0)},[r,c]);const Y=s=>{c?A.mutate(s):v.mutate(s)};if(oe)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block relative",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-500"})}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"–ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–∞..."})]});const g=r?.lessons||[],B=de||[],Z=s=>{const a=s.target.value;H(a)},pe=()=>{if(!D.trim()){I({isOpen:!0,message:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è"});return}p?z.mutate({title:D,description:E||void 0,order:typeof f=="number"?f:0}):Q.mutate({title:D,description:E||void 0,order:typeof f=="number"?f:0})},he=s=>{const a=new Set(K);a.has(s)?a.delete(s):a.add(s),ce(a)},be=s=>{T(s),h(s.title),b(s.description||""),j(s.order),y(!0),N("modules")},_=()=>{T(null),h(""),b(""),j(0),y(!1)},fe=s=>{P({isOpen:!0,moduleId:s})};return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>k("/teacher/courses"),className:"flex items-center text-neutral-600 hover:text-primary-600 mb-6 transition-colors animate-slide-in",children:[e.jsx(we,{className:"h-5 w-5 mr-2"}),t("common.back")," ",t("courses.title")]}),e.jsx("div",{className:"relative mb-8 animate-fade-scale",children:e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-5xl font-bold text-gradient",children:c?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å":"–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å"})}),c?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-neutral-200",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{type:"button",onClick:()=>N("info"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="info"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"}),e.jsx("button",{type:"button",onClick:()=>N("modules"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="modules"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–ú–æ–¥—É–ª–∏"}),e.jsx("button",{type:"button",onClick:()=>N("lessons"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="lessons"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–£—Ä–æ–∫–∏"}),e.jsx("button",{type:"button",onClick:()=>N("tests"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="tests"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–¢–µ—Å—Ç—ã"})]})}),m==="info"&&e.jsx("div",{className:"card p-6",children:e.jsxs("form",{onSubmit:X(Y),className:"space-y-6",children:[e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.1s"},children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-neutral-700 mb-2",children:t("courses.courseTitle")}),e.jsx("input",{...i("title"),type:"text",className:"input-field",placeholder:t("courses.courseTitle")}),l.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.title.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.2s"},children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-neutral-700 mb-2",children:t("courses.courseDescription")}),e.jsx("textarea",{...i("description"),rows:4,className:"input-field",placeholder:t("courses.courseDescription")})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.3s"},children:[e.jsx("label",{htmlFor:"thumbnailUrl",className:"block text-sm font-medium text-neutral-700 mb-2",children:"URL –æ–±–ª–æ–∂–∫–∏ –∫—É—Ä—Å–∞"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{...i("thumbnailUrl"),type:"url",onChange:s=>{Z(s),i("thumbnailUrl").onChange(s)},className:"input-field",placeholder:"https://..."}),(L||r?.thumbnailUrl)&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-neutral-200 shadow-soft animate-fade-scale",children:[e.jsx("img",{src:L||r?.thumbnailUrl,alt:"Course thumbnail",className:"w-full h-48 object-cover",onError:s=>{s.target.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-white text-sm",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:t("courses.preview",{defaultValue:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"})})]})})]})]}),l.thumbnailUrl&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.thumbnailUrl.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.4s"},children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-neutral-700 mb-2",children:t("courses.coursePrice")}),e.jsx("input",{...i("price",{valueAsNumber:!0}),type:"number",step:"0.01",min:"0",className:"input-field",placeholder:"0"}),l.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.price.message})]}),e.jsx("div",{className:"animate-slide-in",style:{animationDelay:"0.45s"},children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"isVisible",className:"block text-sm font-medium text-neutral-700 mb-1",children:"–í–∏–¥–∏–º–æ—Å—Ç—å –∫—É—Ä—Å–∞"}),e.jsx("p",{className:"text-xs text-neutral-500",children:q("isVisible")?"–ö—É—Ä—Å –≤–∏–¥–µ–Ω –≤—Å–µ–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º –≤ –∫–∞—Ç–∞–ª–æ–≥–µ":"–ö—É—Ä—Å —Å–∫—Ä—ã—Ç –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{...i("isVisible"),type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-neutral-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.48s"},children:[e.jsxs("label",{htmlFor:"language",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–Ø–∑—ã–∫ –∫—É—Ä—Å–∞ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...i("language"),className:"input-field",children:[e.jsx("option",{value:"ru",children:"üá∑üá∫ –†—É—Å—Å–∫–∏–π"}),e.jsx("option",{value:"en",children:"üá∫üá∏ English"}),e.jsx("option",{value:"uz",children:"üá∫üáø O'zbek"}),e.jsx("option",{value:"kk",children:"üá∞üáø “ö–∞–∑–∞“õ—à–∞"})]}),e.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"–ö—É—Ä—Å –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —è–∑—ã–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"}),l.language&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.language.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.49s"},children:[e.jsxs("label",{htmlFor:"subscriptionType",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–¢–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏ ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsxs("select",{...i("subscriptionType"),className:"input-field",children:[e.jsx("option",{value:"",children:"–ù–µ –≤—ã–±—Ä–∞–Ω"}),e.jsx("option",{value:"FREE",children:"–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π"}),e.jsx("option",{value:"TRIAL",children:"–° –ø—Ä–æ–±–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º"}),e.jsx("option",{value:"PAID",children:"–ü–ª–∞—Ç–Ω—ã–π"})]}),l.subscriptionType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.subscriptionType.message})]}),q("subscriptionType")==="TRIAL"&&e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.495s"},children:[e.jsxs("label",{htmlFor:"trialPeriodDays",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–¥–Ω–µ–π) ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsx("input",{...i("trialPeriodDays",{valueAsNumber:!0}),type:"number",min:"0",className:"input-field",placeholder:"7"}),e.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫—É—Ä—Å—É"}),l.trialPeriodDays&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.trialPeriodDays.message})]}),c&&g.length>0&&e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.5s"},children:[e.jsxs("label",{htmlFor:"trialLessonId",className:"block text-sm font-medium text-neutral-700 mb-2",children:[t("courses.trialLesson",{defaultValue:"–ü—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫"})," ",e.jsxs("span",{className:"text-neutral-500 text-xs",children:["(",t("common.optional",{defaultValue:"–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"}),")"]})]}),e.jsxs("select",{...i("trialLessonId"),className:"input-field",children:[e.jsx("option",{value:"",children:t("courses.notSelected",{defaultValue:"–ù–µ –≤—ã–±—Ä–∞–Ω"})}),g.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",disabled:v.isLoading||A.isLoading,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(te,{className:"h-5 w-5 mr-2"}),v.isLoading||A.isLoading?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"‚ü≥"})," ",e.jsx("span",{children:t("common.loading")})]}):e.jsx("span",{children:t("common.save")})]}),c&&e.jsxs("button",{type:"button",onClick:()=>R(!0),disabled:V.isLoading,className:"btn-secondary border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ae,{className:"h-5 w-5 mr-2"}),V.isLoading?"–£–¥–∞–ª–µ–Ω–∏–µ...":"–£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å"]})]})]})}),m==="modules"&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:t("modules.courseModules",{defaultValue:"–ú–æ–¥—É–ª–∏ –∫—É—Ä—Å–∞"})}),e.jsxs("button",{type:"button",onClick:()=>{y(!S),S&&_()},className:"btn-primary text-sm",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),S?"–û—Ç–º–µ–Ω–∞":"–°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å"]})]}),S&&e.jsxs("div",{className:"mb-6 p-4 border border-primary-200 rounded-lg bg-primary-50",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:p?t("modules.editModule"):t("modules.newModule",{defaultValue:"–ù–æ–≤—ã–π –º–æ–¥—É–ª—å"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:D,onChange:s=>h(s.target.value),placeholder:t("modules.moduleTitle"),className:"input-field"}),e.jsx("textarea",{value:E,onChange:s=>b(s.target.value),placeholder:t("modules.moduleDescriptionOptional",{defaultValue:"–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"}),rows:2,className:"input-field"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm text-neutral-700",children:[t("modules.order",{defaultValue:"–ü–æ—Ä—è–¥–æ–∫"}),":"]}),e.jsx("input",{type:"number",value:f,onChange:s=>{const a=s.target.value;j(a===""?"":Number(a))},min:"0",className:"input-field w-20"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:pe,disabled:Q.isLoading||z.isLoading,className:"btn-primary text-sm flex-1 disabled:opacity-50",children:Q.isLoading||z.isLoading?t("common.loading"):t(p?"common.save":"common.create")}),p&&e.jsx("button",{type:"button",onClick:_,className:"btn-secondary text-sm",children:t("common.cancel")})]})]})]}),B.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ce,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-500 text-sm",children:t("modules.noModules")}),e.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:t("modules.createFirstModule",{defaultValue:"–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–∫–æ–≤"})})]}):e.jsx("div",{className:"space-y-3",children:B.sort((s,a)=>s.order-a.order).map(s=>{const a=g.filter(d=>d.moduleId===s.id),w=K.has(s.id);return e.jsxs("div",{className:"border border-neutral-200 rounded-lg overflow-hidden hover:border-primary-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-neutral-50 hover:bg-neutral-100",onClick:()=>he(s.id),children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[w?e.jsx(ke,{className:"h-4 w-4 text-neutral-400"}):e.jsx(Me,{className:"h-4 w-4 text-neutral-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:s.title}),s.description&&e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:s.description}),e.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:["–ü–æ—Ä—è–¥–æ–∫: ",s.order," ‚Ä¢ –£—Ä–æ–∫–æ–≤: ",a.length]})]})]}),e.jsxs("div",{className:"flex gap-2",onClick:d=>d.stopPropagation(),children:[e.jsx(C,{to:`/teacher/courses/${n}/lessons/new?moduleId=${s.id}`,className:"text-primary-600 hover:text-primary-700 text-sm transition-colors flex items-center gap-1 px-2 py-1 rounded hover:bg-primary-50",title:t("lessons.addToModule",{defaultValue:"–î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–∫ –≤ –º–æ–¥—É–ª—å"}),children:e.jsx(U,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>be(s),className:"text-primary-600 hover:text-primary-700 text-sm transition-colors px-2 py-1 rounded hover:bg-primary-50",title:t("modules.editModule"),children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>fe(s.id),className:"text-red-500 hover:text-red-600 text-sm transition-colors px-2 py-1 rounded hover:bg-red-50",title:t("modules.deleteModule",{defaultValue:"–£–¥–∞–ª–∏—Ç—å –º–æ–¥—É–ª—å"}),children:e.jsx(ae,{className:"h-4 w-4"})})]})]}),w&&e.jsx("div",{className:"border-t border-neutral-200 bg-white",children:a.length>0?e.jsx("div",{className:"p-3 space-y-2",children:a.sort((d,G)=>d.order-G.order).map((d,G)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-50 rounded hover:bg-neutral-100 transition-colors",children:[e.jsxs("span",{className:"text-xs text-neutral-700",children:[G+1,". ",d.title]}),e.jsx(C,{to:`/teacher/courses/${n}/lessons/${d.id}/edit`,className:"text-primary-600 hover:text-primary-700 text-xs transition-colors",children:t("common.edit")})]},d.id))}):e.jsx("div",{className:"p-3 text-center",children:e.jsx("p",{className:"text-xs text-neutral-400",children:t("modules.noLessonsInModule",{defaultValue:"–ù–µ—Ç —É—Ä–æ–∫–æ–≤ –≤ —ç—Ç–æ–º –º–æ–¥—É–ª–µ"})})})})]},s.id)})})]}),m==="lessons"&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:t("courses.allLessons",{defaultValue:"–í—Å–µ —É—Ä–æ–∫–∏ –∫—É—Ä—Å–∞"})}),e.jsxs(C,{to:`/teacher/courses/${n}/lessons/new`,className:"btn-primary text-sm",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),t("lessons.createLesson")]})]}),g.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Te,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-500 text-sm",children:t("lessons.noLessons")})]}):e.jsx("div",{className:"space-y-2",children:g.sort((s,a)=>s.order-a.order).map((s,a)=>{const w=B.find(d=>d.id===s.moduleId);return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-neutral-200 rounded-lg hover:border-primary-300 hover:bg-neutral-50 transition-all",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-sm font-medium text-neutral-900",children:[a+1,". ",s.title]}),w&&e.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:[t("modules.title"),": ",w.title]})]}),e.jsx(C,{to:`/teacher/courses/${n}/lessons/${s.id}/edit`,className:"text-primary-600 hover:text-primary-700 text-sm transition-colors",children:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"})]},s.id)})})]}),m==="tests"&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:"–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã"}),e.jsxs(C,{to:`/teacher/courses/${n}/tests/new`,className:"btn-primary text-sm",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç"]})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(De,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-500 text-sm",children:"–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–Ω–∞–Ω–∏–π"})]})]})]}):e.jsx("div",{className:"card p-6 animate-fade-scale",children:e.jsxs("form",{onSubmit:X(Y),className:"space-y-6",children:[e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.1s"},children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-neutral-700 mb-2",children:"–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞"}),e.jsx("input",{...i("title"),type:"text",className:"input-field",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞"}),l.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.title.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.2s"},children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-neutral-700 mb-2",children:"–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞"}),e.jsx("textarea",{...i("description"),rows:4,className:"input-field",placeholder:"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞"})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.3s"},children:[e.jsx("label",{htmlFor:"thumbnailUrl",className:"block text-sm font-medium text-neutral-700 mb-2",children:"URL –æ–±–ª–æ–∂–∫–∏ –∫—É—Ä—Å–∞"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{...i("thumbnailUrl"),type:"url",onChange:s=>{Z(s),i("thumbnailUrl").onChange(s)},className:"input-field",placeholder:"https://..."}),L&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-neutral-200 shadow-soft animate-fade-scale",children:[e.jsx("img",{src:L,alt:"Course thumbnail",className:"w-full h-48 object-cover",onError:s=>{s.target.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-white text-sm",children:[e.jsx(se,{className:"h-4 w-4"}),e.jsx("span",{children:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"})]})})]})]}),l.thumbnailUrl&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.thumbnailUrl.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.4s"},children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-neutral-700 mb-2",children:"–¶–µ–Ω–∞ –∫—É—Ä—Å–∞"}),e.jsx("input",{...i("price",{valueAsNumber:!0}),type:"number",step:"0.01",min:"0",className:"input-field",placeholder:"0"}),l.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.price.message})]}),e.jsx("div",{className:"animate-slide-in",style:{animationDelay:"0.45s"},children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"isVisible",className:"block text-sm font-medium text-neutral-700 mb-1",children:"–í–∏–¥–∏–º–æ—Å—Ç—å –∫—É—Ä—Å–∞"}),e.jsx("p",{className:"text-xs text-neutral-500",children:q("isVisible")?"–ö—É—Ä—Å –≤–∏–¥–µ–Ω –≤—Å–µ–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º –≤ –∫–∞—Ç–∞–ª–æ–≥–µ":"–ö—É—Ä—Å —Å–∫—Ä—ã—Ç –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{...i("isVisible"),type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-neutral-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),e.jsx("div",{className:"animate-slide-in",style:{animationDelay:"0.5s"},children:e.jsxs("button",{type:"submit",disabled:v.isLoading,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(te,{className:"h-5 w-5 mr-2"}),v.isLoading?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"‚ü≥"})," ",e.jsx("span",{children:"–°–æ–∑–¥–∞–Ω–∏–µ..."})]}):e.jsx("span",{children:"–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å"})]})})]})}),e.jsx(Fe,{isOpen:W.isOpen,onClose:()=>I({isOpen:!1,message:""}),message:W.message}),e.jsx(ne,{isOpen:O.isOpen,onClose:()=>P({isOpen:!1,moduleId:null}),onConfirm:()=>{O.moduleId&&(ue.mutate(O.moduleId),P({isOpen:!1,moduleId:null}))},title:t("modules.deleteModule",{defaultValue:"–£–¥–∞–ª–∏—Ç—å –º–æ–¥—É–ª—å"}),message:t("modules.deleteConfirm",{defaultValue:"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å? –í—Å–µ —É—Ä–æ–∫–∏ –≤ –º–æ–¥—É–ª–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è, –Ω–æ –±—É–¥—É—Ç –±–µ–∑ –º–æ–¥—É–ª—è."}),variant:"danger"}),e.jsx(ne,{isOpen:me,onClose:()=>R(!1),onConfirm:()=>{V.mutate(),R(!1)},title:"–£–¥–∞–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞",message:"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫—É—Ä—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ —É—Ä–æ–∫–∏ –∏ –º–æ–¥—É–ª–∏ —Ç–∞–∫–∂–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.",confirmText:V.isLoading?"–£–¥–∞–ª–µ–Ω–∏–µ...":"–£–¥–∞–ª–∏—Ç—å",cancelText:"–û—Ç–º–µ–Ω–∞",variant:"danger"})]})}export{Pe as default};
