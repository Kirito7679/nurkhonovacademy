# üîê –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π —Ä–æ–ª–∏

–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –≤ —Å–∏—Å—Ç–µ–º–µ —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ - **ADMIN –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤–µ–∑–¥–µ**.

–ï—Å–ª–∏ —É –≤–∞—Å –ø—Ä–æ–±–ª–µ–º—ã —Å –¥–æ—Å—Ç—É–ø–æ–º, –≤–æ–∑–º–æ–∂–Ω–æ –≤–∞—à–∞ —Ä–æ–ª—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –Ω–µ ADMIN.

## üîß –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ—é —Ä–æ–ª—å

```bash
cd backend
npx tsx scripts/checkUserRole.ts +998901234567
```

–ó–∞–º–µ–Ω–∏—Ç–µ `+998901234567` –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞.

### –®–∞–≥ 2: –ï—Å–ª–∏ —Ä–æ–ª—å –Ω–µ ADMIN, –æ–±–Ω–æ–≤–∏—Ç–µ –µ—ë

```bash
# –ù–∞–∑–Ω–∞—á–∏—Ç—å ADMIN –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É
npx tsx scripts/makeAdmin.ts +998901234567

# –ò–ª–∏ –Ω–∞–∑–Ω–∞—á–∏—Ç—å ADMIN –≤—Å–µ–º —É—á–∏—Ç–µ–ª—è–º
npx tsx scripts/makeAdmin.ts --all-teachers

# –ò–ª–∏ –ø–æ ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
npx tsx scripts/makeAdmin.ts --id <user-id>
```

### –®–∞–≥ 3: –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–æ–ª–∏ –Ω—É–∂–Ω–æ:
1. –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
2. –í–æ–π—Ç–∏ –∑–∞–Ω–æ–≤–æ
3. –¢–æ–∫–µ–Ω –æ–±–Ω–æ–≤–∏—Ç—Å—è —Å –Ω–æ–≤–æ–π —Ä–æ–ª—å—é

## üîß –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ Prisma Studio

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ Prisma Studio:
```bash
cd backend
npm run prisma:studio
```

2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É `users`
3. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ–ª–µ `role` –Ω–∞ `ADMIN`
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
6. –í—ã–π–¥–∏—Ç–µ –∏ –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ

## üîß –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ SQL –∑–∞–ø—Ä–æ—Å

–ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ SQLite:

```bash
cd backend
sqlite3 prisma/dev.db
```

–ó–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```sql
-- –ù–∞–π—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT id, firstName, lastName, phone, role FROM users WHERE phone = '+998901234567';

-- –û–±–Ω–æ–≤–∏—Ç—å —Ä–æ–ª—å –Ω–∞ ADMIN
UPDATE users SET role = 'ADMIN' WHERE phone = '+998901234567';

-- –ò–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ—Ö TEACHER –Ω–∞ ADMIN
UPDATE users SET role = 'ADMIN' WHERE role = 'TEACHER';
```

## ‚úÖ –ß—Ç–æ –¥–∞–µ—Ç —Ä–æ–ª—å ADMIN

–° —Ä–æ–ª—å—é ADMIN –≤—ã –º–æ–∂–µ—Ç–µ:

- ‚úÖ –ü—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å –ª—é–±—ã–µ –∫—É—Ä—Å—ã –∫ –ª—é–±—ã–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º
- ‚úÖ –û—Ç–∫—Ä–µ–ø–ª—è—Ç—å –ª—é–±—ã–µ –∫—É—Ä—Å—ã –æ—Ç –ª—é–±—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—ã–µ –∫—É—Ä—Å—ã
- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å —É—Ä–æ–∫–∏ –≤ –ª—é–±—ã—Ö –∫—É—Ä—Å–∞—Ö
- ‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–∞–π–ª–∞–º–∏ –≤ –ª—é–±—ã—Ö —É—Ä–æ–∫–∞—Ö
- ‚úÖ –£–¥–∞–ª—è—Ç—å –ª—é–±—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏
- ‚úÖ –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –≤ –∫–æ–¥–µ

–í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ –≤ —Å–∏—Å—Ç–µ–º–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Å–ª–µ–¥—É—é—â—É—é –ª–æ–≥–∏–∫—É:

```typescript
// ADMIN –∏–º–µ–µ—Ç –ø–æ–ª–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤–µ–∑–¥–µ
if (req.user!.role !== 'ADMIN' && resourceOwnerId !== req.user!.id) {
  throw new AppError('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤', 403);
}
```

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç:
- **ADMIN** ‚Üí –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º—É
- **TEACHER** ‚Üí –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –∫ —Å–≤–æ–∏–º —Ä–µ—Å—É—Ä—Å–∞–º
- **STUDENT** ‚Üí –∏–º–µ–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–æ–ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ**:
1. –í—ã–π–¥–∏—Ç–µ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
2. –í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
3. –¢–æ–∫–µ–Ω JWT –æ–±–Ω–æ–≤–∏—Ç—Å—è —Å –Ω–æ–≤–æ–π —Ä–æ–ª—å—é

–¢–æ–∫–µ–Ω —Ö—Ä–∞–Ω–∏—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—ç—Ç–æ–º—É –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è.
