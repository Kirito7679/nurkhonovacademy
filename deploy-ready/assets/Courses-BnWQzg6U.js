import{r as a,k as _,e as B,j as e,a2 as E,a3 as $,a4 as I,a5 as A,X as D,q as p,L as N,K as b,a6 as y,Z as L,a7 as O}from"./vendor-react-B4b84SyH.js";import{a as F}from"./index-D6PcLXw1.js";import{u as U}from"./useDebounce-C0ixx5ei.js";import{S as i}from"./Skeleton-Bxx4kITG.js";const G=a.memo(function(){const{t}=_(),[o,f]=a.useState(()=>localStorage.getItem("courses_viewMode")||"grid"),[g,w]=a.useState(""),x=U(g,500),[r,j]=a.useState(()=>localStorage.getItem("courses_statusFilter")||"all"),[d,S]=a.useState(()=>localStorage.getItem("courses_sortBy")||"createdAt"),[l,k]=a.useState(()=>localStorage.getItem("courses_sortOrder")||"desc");a.useEffect(()=>{localStorage.setItem("courses_viewMode",o)},[o]),a.useEffect(()=>{localStorage.setItem("courses_statusFilter",r)},[r]),a.useEffect(()=>{localStorage.setItem("courses_sortBy",d)},[d]),a.useEffect(()=>{localStorage.setItem("courses_sortOrder",l)},[l]);const{data:C,isLoading:V}=B(["courses",x,r,d,l],async()=>{const s=new URLSearchParams;return x&&s.append("search",x),r!=="all"&&s.append("status",r),s.append("sortBy",d),s.append("sortOrder",l),(await F.get(`/courses?${s.toString()}`)).data.data||[]},{staleTime:5*60*1e3,cacheTime:10*60*1e3,refetchOnWindowFocus:!1}),u=C||[],v=s=>s.hasAccess?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-700 border border-green-200",children:[e.jsx(L,{className:"h-3 w-3 mr-1 text-green-700"}),t("students.approved")]}):s.studentCourseStatus==="PENDING"?e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-700 border border-yellow-200",children:t("students.pending")}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-neutral-100 text-neutral-600 border border-neutral-200",children:[e.jsx(O,{className:"h-3 w-3 mr-1"}),t("courses.locked",{defaultValue:"Заблокирован"})]});return e.jsx("div",{children:e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsx("h1",{className:"text-3xl md:text-5xl font-bold text-gradient",children:t("courses.title")}),e.jsxs("div",{className:"flex items-center gap-2 bg-white border border-neutral-300 rounded-lg p-1 self-start md:self-auto shadow-sm",children:[e.jsx("button",{onClick:()=>f("grid"),className:`p-2 rounded-md transition-all duration-200 ${o==="grid"?"bg-gradient-primary text-white shadow-sm":"text-neutral-500 hover:text-primary-600 hover:bg-neutral-50"}`,title:t("courses.gridView",{defaultValue:"Отображать в виде сетки"}),children:e.jsx(E,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>f("list"),className:`p-2 rounded-md transition-all duration-200 ${o==="list"?"bg-gradient-primary text-white shadow-sm":"text-neutral-500 hover:text-primary-600 hover:bg-neutral-50"}`,title:t("courses.listView",{defaultValue:"Отображать в виде списка"}),children:e.jsx($,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(I,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400 pointer-events-none z-10"}),e.jsx("input",{type:"text",placeholder:t("courses.searchPlaceholder",{defaultValue:"Поиск курсов..."}),value:g,onChange:s=>w(s.target.value),className:"input-field pl-11"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:`h-5 w-5 ${r!=="all"?"text-primary-600":"text-neutral-400"} hidden md:block transition-colors`}),e.jsxs("select",{value:r,onChange:s=>j(s.target.value),className:`input-field flex-1 md:flex-none transition-all ${r!=="all"?"border-primary-400 bg-primary-50/50":""}`,children:[e.jsx("option",{value:"all",children:t("courses.allCourses")}),e.jsx("option",{value:"approved",children:t("students.approved")}),e.jsx("option",{value:"pending",children:t("students.pending")}),e.jsx("option",{value:"locked",children:t("courses.locked",{defaultValue:"Заблокированные"})})]}),r!=="all"&&e.jsx("button",{onClick:()=>j("all"),className:"p-1.5 text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-lg transition-colors",title:"Сбросить фильтр",children:e.jsx(D,{size:16})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:d,onChange:s=>S(s.target.value),className:"input-field flex-1 md:flex-none",children:[e.jsx("option",{value:"createdAt",children:t("courses.sortByDate",{defaultValue:"По дате"})}),e.jsx("option",{value:"title",children:t("courses.sortByTitle",{defaultValue:"По названию"})}),e.jsx("option",{value:"lessons",children:t("courses.sortByLessons",{defaultValue:"По урокам"})})]}),e.jsx("button",{onClick:()=>k(l==="asc"?"desc":"asc"),className:`px-3 md:px-4 py-2 bg-white border border-neutral-300 rounded-lg text-neutral-700 hover:bg-primary-50 hover:border-primary-300 hover:text-primary-700 transition-all text-sm md:text-base ${l==="asc"?"border-primary-400 bg-primary-50/50":""}`,title:l==="asc"?t("courses.sortAsc",{defaultValue:"По возрастанию"}):t("courses.sortDesc",{defaultValue:"По убыванию"}),children:l==="asc"?"↑":"↓"})]})]})]}),V?e.jsx("div",{className:"space-y-6",children:o==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:Array.from({length:6}).map((s,n)=>e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx(i,{height:192,variant:"rectangular"}),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsx(i,{height:24,className:"mb-2"}),e.jsx(i,{height:16,className:"mb-4 w-3/4"}),e.jsx(i,{height:16,width:100})]})]},n))}):e.jsx("div",{className:"space-y-4",children:Array.from({length:5}).map((s,n)=>e.jsx("div",{className:"card p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4",children:[e.jsx(i,{width:192,height:128,variant:"rectangular",className:"flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx(i,{height:24,className:"mb-2"}),e.jsx(i,{height:16,className:"mb-3 w-2/3"}),e.jsx(i,{height:16,width:150})]})]})},n))})}):u.length===0?e.jsxs("div",{className:"text-center py-12 animate-fade-scale",children:[e.jsx(p,{className:"mx-auto h-16 w-16 text-neutral-400 mb-4"}),e.jsx("p",{className:"text-neutral-600 mb-4",children:t("courses.noCourses")}),x&&e.jsx("p",{className:"text-sm text-neutral-500 mt-2",children:t("courses.tryDifferentSearch",{defaultValue:"Попробуйте изменить параметры поиска"})})]}):o==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:u.map((s,n)=>{var c,m;return e.jsxs("div",{className:"card card-hover overflow-hidden group animate-fade-scale",style:{animationDelay:`${.1*n}s`},children:[s.thumbnailUrl&&e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("img",{src:s.thumbnailUrl,alt:s.title||"Course thumbnail",loading:"lazy",className:"w-full h-48 object-cover group-hover:scale-110 transition-transform duration-500",onError:h=>{h.target.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-neutral-900 group-hover:text-primary-600 transition-colors break-words flex-1",children:s.title}),e.jsx("div",{className:"flex-shrink-0",children:v(s)})]}),s.description&&e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-4 line-clamp-2 break-words",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-neutral-500",children:[e.jsx(p,{className:"h-4 w-4 mr-2 text-primary-500"}),e.jsxs("span",{children:[((c=s._count)==null?void 0:c.lessons)||0," ",t("lessons.lessonsCount",{count:((m=s._count)==null?void 0:m.lessons)||0,defaultValue:"уроков"})]})]}),e.jsxs(N,{to:`/courses/${s.id}`,className:"btn-secondary group inline-flex items-center gap-2 text-sm",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:"Просмотр"}),e.jsx(y,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform duration-300"})]})]})]})]},s.id)})}):e.jsx("div",{className:"space-y-4",children:u.map((s,n)=>{var c,m;return e.jsx("div",{className:"card card-hover group animate-slide-in",style:{animationDelay:`${.05*n}s`},children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-3 md:gap-4 p-4 md:p-6",children:[s.thumbnailUrl&&e.jsx("div",{className:"flex-shrink-0 w-full md:w-48 h-32 overflow-hidden rounded-lg",children:e.jsx("img",{src:s.thumbnailUrl,alt:s.title||"Course thumbnail",loading:"lazy",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:h=>{h.target.style.display="none"}})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-2 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-neutral-900 group-hover:text-primary-600 transition-colors mb-1 break-words",children:s.title}),s.description&&e.jsx("p",{className:"text-gray-400 text-xs md:text-sm mb-3 line-clamp-2 break-words",children:s.description})]}),e.jsx("div",{className:"flex-shrink-0 sm:ml-4",children:v(s)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-neutral-500",children:[e.jsx(p,{className:"h-4 w-4 mr-2 text-primary-500"}),e.jsxs("span",{children:[((c=s._count)==null?void 0:c.lessons)||0," ",t("lessons.lessonsCount",{count:((m=s._count)==null?void 0:m.lessons)||0,defaultValue:"уроков"})]})]}),e.jsxs(N,{to:`/courses/${s.id}`,className:"btn-secondary group inline-flex items-center gap-2 text-sm",children:[e.jsx(b,{className:"h-4 w-4"}),e.jsx("span",{children:t("courses.view",{defaultValue:"Просмотр"})}),e.jsx(y,{className:"h-4 w-4 group-hover:translate-x-1 transition-transform duration-300"})]})]})]})]})},s.id)})})]})})});export{G as default};
