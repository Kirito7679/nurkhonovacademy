import{d as v,u as C,r as c,e as L,f as y,j as e,aN as m,a7 as w,a8 as E,q as u,v as A}from"./vendor-D-riqg-X.js";import{d as t,a as h}from"./index-citKsecZ.js";import{C as S}from"./ClassFormModal-fQRH98I-.js";function I(){const i=v(),d=C(),[o,l]=c.useState(!1),[r,p]=c.useState(""),[a,j]=c.useState("ALL"),{data:g,isLoading:f}=L(["classes",a],async()=>{const s={};return a!=="ALL"&&(s.status=a),(await h.get("/classes",{params:s})).data.data||[]});y(async s=>{await h.delete(`/classes/${s}`)},{onSuccess:()=>{d.invalidateQueries("classes")}});const x=(g||[]).filter(s=>s.name.toLowerCase().includes(r.toLowerCase())||s.description?.toLowerCase().includes(r.toLowerCase())),N=s=>{switch(s){case t.ACTIVE:return"bg-green-100 text-green-700 border-green-200";case t.COMPLETED:return"bg-blue-100 text-blue-700 border-blue-200";case t.CANCELLED:return"bg-red-100 text-red-700 border-red-200";case t.ARCHIVED:return"bg-gray-100 text-gray-700 border-gray-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},b=s=>{switch(s){case t.ACTIVE:return"Активен";case t.COMPLETED:return"Завершен";case t.CANCELLED:return"Отменен";case t.ARCHIVED:return"Архивирован";default:return s}};return f?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block relative",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-500"})}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"Загрузка классов..."})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gradient",children:"Мои классы"}),e.jsx("p",{className:"text-neutral-600 mt-2",children:"Управляйте групповыми занятиями и студентами"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"btn-primary flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"Создать класс"]})]}),e.jsx("div",{className:"card p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),e.jsx("input",{type:"text",placeholder:"Поиск по названию или описанию...",value:r,onChange:s=>p(s.target.value),className:"input-field pl-10"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"h-5 w-5 text-neutral-400"}),e.jsxs("select",{value:a,onChange:s=>j(s.target.value),className:"input-field",children:[e.jsx("option",{value:"ALL",children:"Все статусы"}),e.jsx("option",{value:t.ACTIVE,children:"Активные"}),e.jsx("option",{value:t.COMPLETED,children:"Завершенные"}),e.jsx("option",{value:t.CANCELLED,children:"Отмененные"}),e.jsx("option",{value:t.ARCHIVED,children:"Архивированные"})]})]})]})}),x.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(u,{className:"h-16 w-16 text-neutral-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-neutral-700 mb-2",children:r||a!=="ALL"?"Классы не найдены":"Нет классов"}),e.jsx("p",{className:"text-neutral-500 mb-6",children:r||a!=="ALL"?"Попробуйте изменить параметры поиска":"Создайте свой первый класс для групповых занятий"}),!r&&a==="ALL"&&e.jsxs("button",{onClick:()=>l(!0),className:"btn-primary inline-flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5"}),"Создать класс"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(s=>e.jsxs("div",{className:"card p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>i(`/classes/${s.id}`),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900 mb-1",children:s.name}),s.description&&e.jsx("p",{className:"text-sm text-neutral-600 line-clamp-2",children:s.description})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium border ${N(s.status)}`,children:b(s.status)})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex items-center text-sm text-neutral-600",children:[e.jsx(u,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:[s._count?.students||s.students?.length||0," / ",s.maxStudents," студентов"]})]}),s.level&&e.jsxs("div",{className:"flex items-center text-sm text-neutral-600",children:[e.jsx("span",{className:"font-medium mr-2",children:"Уровень:"}),e.jsx("span",{children:s.level})]}),s.language&&e.jsxs("div",{className:"flex items-center text-sm text-neutral-600",children:[e.jsx("span",{className:"font-medium mr-2",children:"Язык:"}),e.jsx("span",{children:s.language})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-4 border-t border-neutral-200",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),i(`/classes/${s.id}`)},className:"btn-secondary flex-1 text-sm",children:"Открыть"}),e.jsx("button",{onClick:n=>{n.stopPropagation(),i(`/classes/${s.id}/settings`)},className:"p-2 text-neutral-600 hover:text-primary-600 hover:bg-primary-50 rounded transition-colors",title:"Настройки",children:e.jsx(A,{className:"h-5 w-5"})})]})]},s.id))}),o&&e.jsx(S,{isOpen:o,onClose:()=>l(!1),onSuccess:()=>{l(!1),d.invalidateQueries("classes")}})]})}export{I as default};
