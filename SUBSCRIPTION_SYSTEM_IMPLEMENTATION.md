# ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ —Å –ø–µ—Ä–∏–æ–¥–∞–º–∏ - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞

**–î–∞—Ç–∞:** 2025-01-27  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é (—Ç—Ä–µ–±—É–µ—Ç—Å—è –º–∏–≥—Ä–∞—Ü–∏—è –ë–î –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π)

---

## üéâ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö ‚úÖ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è —Ü–µ–Ω —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –≤ –º–æ–¥–µ–ª—å Course:
  - `price30Days` - —Ü–µ–Ω–∞ –∑–∞ 30 –¥–Ω–µ–π
  - `price3Months` - —Ü–µ–Ω–∞ –∑–∞ 3 –º–µ—Å—è—Ü–∞
  - `price6Months` - —Ü–µ–Ω–∞ –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤
  - `price1Year` - —Ü–µ–Ω–∞ –∑–∞ –≥–æ–¥

### 2. Backend ‚úÖ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—É—Ä—Å–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∫—É—Ä—Å–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫—É—Ä—Å–∞
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–∏–æ–¥–æ–≤)
- ‚úÖ –°–æ–∑–¥–∞–Ω API endpoint –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏: `POST /api/courses/:courseId/extend`
- ‚úÖ –õ–æ–≥–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∞—Ç –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–µ—Ä–∏–æ–¥–∞

### 3. Frontend ‚úÖ
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫—É—Ä—Å–∞ - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è —Ü–µ–Ω –ø–µ—Ä–∏–æ–¥–æ–≤
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã TypeScript
- ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `ExtendSubscriptionModal` –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫—É—Ä—Å–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏

---

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º

### 1. –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û)

```bash
cd backend
npx prisma migrate dev --name add_subscription_prices
```

–ò–ª–∏:

```bash
cd backend
npx prisma db push
```

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–µ–π (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ –±–µ–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–ø–ª–∞—Ç—ã. –î–ª—è production –Ω—É–∂–Ω–æ:

1. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã (Click, Payme, Uzum)
2. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–∏
3. –°–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–ø–∏—Å–∏ –æ –ø–ª–∞—Ç–µ–∂–∞—Ö

**–§–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** `backend/src/controllers/courseController.ts` - —Ñ—É–Ω–∫—Ü–∏—è `extendCourseSubscription`

---

## üéØ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –î–ª—è —É—á–∏—Ç–µ–ª–µ–π:

1. **–°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞ —Å –ø–æ–¥–ø–∏—Å–∫–æ–π:**
   - –í—ã–±–µ—Ä–∏—Ç–µ "–ü–ª–∞—Ç–Ω—ã–π" –≤ —Ç–∏–ø–µ –ø–æ–¥–ø–∏—Å–∫–∏
   - –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ü–µ–Ω—ã –¥–ª—è –Ω—É–∂–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ (30 –¥–Ω–µ–π, 3 –º–µ—Å—è—Ü–∞, 6 –º–µ—Å—è—Ü–µ–≤, –≥–æ–¥)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫—É—Ä—Å

2. **–û–¥–æ–±—Ä–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞:**
   - –ü—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø–µ—Ä–∏–æ–¥ –ø–æ–¥–ø–∏—Å–∫–∏ –≤ –∑–∞–ø—Ä–æ—Å–µ:
   ```json
   {
     "action": "approve",
     "subscriptionPeriod": "30_DAYS"
   }
   ```

### –î–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:

1. **–ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏:**
   - –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫—É—Ä—Å–∞ –Ω–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø–µ—Ä–∏–æ–¥
   - –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–¥–ª–∏—Ç—å"

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend:
- `backend/prisma/schema.prisma` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è —Ü–µ–Ω
- `backend/src/utils/validation.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- `backend/src/controllers/courseController.ts` - –¥–æ–±–∞–≤–ª–µ–Ω endpoint –ø—Ä–æ–¥–ª–µ–Ω–∏—è
- `backend/src/controllers/studentController.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–¥–æ–±—Ä–µ–Ω–∏—è
- `backend/src/routes/courseRoutes.ts` - –¥–æ–±–∞–≤–ª–µ–Ω —Ä–æ—É—Ç –ø—Ä–æ–¥–ª–µ–Ω–∏—è

### Frontend:
- `frontend/src/pages/CourseForm.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è —Ü–µ–Ω
- `frontend/src/pages/CourseDetails.tsx` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ
- `frontend/src/components/ExtendSubscriptionModal.tsx` - –Ω–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- `frontend/src/types/index.ts` - –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–∏–ø—ã

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫—É—Ä—Å–∞ —Å —Ü–µ–Ω–∞–º–∏ –¥–ª—è –ø–µ—Ä–∏–æ–¥–æ–≤
2. ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∫—É—Ä—Å–∞
3. ‚úÖ –û–¥–æ–±—Ä–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —Å –ø–µ—Ä–∏–æ–¥–æ–º
4. ‚úÖ –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–º
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å—Ç–µ—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/SUBSCRIPTION_SYSTEM.md`

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ
