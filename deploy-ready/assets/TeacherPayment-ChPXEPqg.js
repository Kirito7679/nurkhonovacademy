import{d as m,u as x,r as u,e as h,f as p,j as e,D as j,ac as b,z as N}from"./vendor-DS3OdKc2.js";import{a as c}from"./index-BAsZs2-V.js";import{E as y}from"./ErrorModal-CX1_5zyu.js";function C(){const t=m(),r=x(),[n,i]=u.useState({isOpen:!1,message:""}),{data:d,isLoading:o}=h("teacherPaymentStatus",async()=>(await c.get("/payments/teacher/status")).data.data),a=p(async s=>(await c.post("/payments/teacher/process",s)).data.data,{onSuccess:()=>{r.invalidateQueries("teacherPaymentStatus"),r.invalidateQueries("user"),t("/teacher/courses")},onError:s=>{i({isOpen:!0,message:s.response?.data?.message||"Ошибка при обработке оплаты"})}}),l=s=>{a.mutate({paymentMethod:s,amount:1e4})};return o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block relative",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-500"})}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"Загрузка..."})]}):d?.isPaidTeacher?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx(j,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Регистрация оплачена"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:"Вы можете создавать курсы и классы"}),e.jsx("button",{onClick:()=>t("/teacher/courses"),className:"btn-primary",children:"Перейти к курсам"})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"relative mb-8 animate-slide-in",children:e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-5xl font-bold text-gradient",children:"Оплата регистрации учителя"})}),e.jsxs("div",{className:"card p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(b,{className:"h-8 w-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:"Для создания курсов и классов"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Необходимо оплатить регистрацию учителя"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Важная информация"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"После оплаты вы получите возможность создавать неограниченное количество курсов и классов. Оплата производится один раз."})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-neutral-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Стоимость регистрации"}),e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"10 000 сум"})]}),e.jsx("p",{className:"text-sm text-neutral-600 mb-6",children:"Единоразовая оплата для активации аккаунта учителя"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>l("CARD"),disabled:a.isLoading,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a.isLoading?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"⟳"}),"Обработка..."]}):"Оплатить картой"}),e.jsx("button",{onClick:()=>l("PAYPAL"),disabled:a.isLoading,className:"w-full btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Оплатить через PayPal"}),e.jsx("button",{onClick:()=>l("OTHER"),disabled:a.isLoading,className:"w-full btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Другой способ оплаты"})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>t(-1),className:"text-sm text-neutral-600 hover:text-neutral-900",children:"← Назад"})})]}),e.jsx(y,{isOpen:n.isOpen,message:n.message,onClose:()=>i({isOpen:!1,message:""})})]})}export{C as default};
