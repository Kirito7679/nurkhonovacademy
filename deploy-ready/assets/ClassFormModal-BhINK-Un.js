import{r as v,V as f,f as x,j as e,X as N,$ as y,a0 as S,a1 as d,aU as w,aT as k}from"./vendor-D-riqg-X.js";import{a as p}from"./index-BdrAEdvH.js";const F=S({name:d().min(1,"Название класса обязательно"),description:d().optional(),maxStudents:k().int().min(1).max(50).default(10),level:w(["Beginner","Intermediate","Advanced"]).optional(),language:d().optional()});function C({isOpen:h,onClose:o,onSuccess:m,classData:s}){const[c,a]=v.useState(""),{register:n,handleSubmit:b,formState:{errors:l},reset:u}=f({resolver:y(F),defaultValues:s?{name:s.name,description:s.description||"",maxStudents:s.maxStudents,level:s.level||void 0,language:s.language||""}:{name:"",description:"",maxStudents:10,level:void 0,language:""}}),i=x(async t=>(await p.post("/classes",t)).data.data,{onSuccess:()=>{u(),a(""),m()},onError:t=>{a(t.response?.data?.message||"Ошибка при создании класса")}}),r=x(async t=>(await p.put(`/classes/${s?.id}`,t)).data.data,{onSuccess:()=>{u(),a(""),m()},onError:t=>{a(t.response?.data?.message||"Ошибка при обновлении класса")}}),g=t=>{a(""),s?r.mutate(t):i.mutate(t)};return h?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:s?"Редактировать класс":"Создать новый класс"}),e.jsx("button",{onClick:o,className:"text-neutral-400 hover:text-neutral-600 transition-colors",children:e.jsx(N,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:b(g),className:"p-6 space-y-6",children:[c&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Название класса *"}),e.jsx("input",{...n("name"),type:"text",id:"name",className:"input-field",placeholder:"Например: Английский для начинающих - Группа A"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Описание"}),e.jsx("textarea",{...n("description"),id:"description",rows:3,className:"input-field",placeholder:"Описание класса, цели обучения..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"maxStudents",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Максимум студентов *"}),e.jsx("input",{...n("maxStudents",{valueAsNumber:!0}),type:"number",id:"maxStudents",min:"1",max:"50",className:"input-field"}),l.maxStudents&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.maxStudents.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"level",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Уровень"}),e.jsxs("select",{...n("level"),id:"level",className:"input-field",children:[e.jsx("option",{value:"",children:"Не указан"}),e.jsx("option",{value:"Beginner",children:"Начинающий"}),e.jsx("option",{value:"Intermediate",children:"Средний"}),e.jsx("option",{value:"Advanced",children:"Продвинутый"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"language",className:"block text-sm font-medium text-neutral-700 mb-2",children:"Язык обучения"}),e.jsx("input",{...n("language"),type:"text",id:"language",className:"input-field",placeholder:"Например: English, Русский"})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t border-neutral-200",children:[e.jsx("button",{type:"button",onClick:o,className:"btn-secondary",disabled:i.isLoading||r.isLoading,children:"Отмена"}),e.jsx("button",{type:"submit",className:"btn-primary",disabled:i.isLoading||r.isLoading,children:i.isLoading||r.isLoading?"Сохранение...":s?"Сохранить":"Создать"})]})]})]})}):null}export{C};
