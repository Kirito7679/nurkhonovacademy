# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ 429 (Rate Limit)

## ‚úÖ –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API (429 –æ—à–∏–±–∫–∏)

**–ü—Ä–∏—á–∏–Ω—ã:**
- CommentsSection –¥–µ–ª–∞–ª –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
- Chat –¥–µ–ª–∞–ª –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã  
- TeacherChats –¥–µ–ª–∞–ª –∑–∞–ø—Ä–æ—Å—ã –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
- Rate limit –±—ã–ª 200 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 15 –º–∏–Ω—É—Ç

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

1. **–£–≤–µ–ª–∏—á–µ–Ω rate limit –Ω–∞ –±—ç–∫–µ–Ω–¥–µ:**
   - –° 200 –¥–æ 500 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ 15 –º–∏–Ω—É—Ç
   - –§–∞–π–ª: `backend/src/middleware/rateLimit.ts`

2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:**
   - **CommentsSection:** –£–±—Ä–∞–Ω `refetchInterval` - —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ WebSocket –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
   - **Chat:** –£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å 3 –¥–æ 10 —Å–µ–∫—É–Ω–¥
   - **TeacherChats:** –£–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª —Å 3 –¥–æ 10 —Å–µ–∫—É–Ω–¥
   - –û—Ç–∫–ª—é—á–µ–Ω `refetchOnWindowFocus` –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 429:**
   - API interceptor —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç 429 –æ—à–∏–±–∫–∏
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ retry-after
   - –û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ dev —Ä–µ–∂–∏–º–µ

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ CSP –æ—à–∏–±–∫–∞—Ö Google Drive

**–û—à–∏–±–∫–∏ —Ç–∏–ø–∞:**
```
Framing 'https://drive.google.com/' violates the following Content Security Policy directive
```

**–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ!** Google Drive –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–≤–æ–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ iframe –Ω–∞ –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–∞—Ö –∏–∑ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –≠—Ç–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ —Ñ–∞–π–ª
- –ó–∞–≥—Ä—É–∂–∞–π—Ç–µ –≤–∏–¥–µ–æ –Ω–∞–ø—Ä—è–º—É—é —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ (–Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ YouTube –∏–ª–∏ Vimeo –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è

---

## üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `backend/src/middleware/rateLimit.ts` - —É–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç
- `frontend/src/components/CommentsSection.tsx` - —É–±—Ä–∞–Ω polling
- `frontend/src/pages/Chat.tsx` - —É–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª
- `frontend/src/pages/TeacherChats.tsx` - —É–≤–µ–ª–∏—á–µ–Ω –∏–Ω—Ç–µ—Ä–≤–∞–ª
- `frontend/src/services/api.ts` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ 429

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. **–û–±–Ω–æ–≤–∏—Ç—å –±—ç–∫–µ–Ω–¥:**
   - –ó–∞–∫–æ–º–º–∏—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `backend/src/middleware/rateLimit.ts`
   - –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

2. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏–∑ `deploy-ready/`
   - –°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `–û–ë–ù–û–í–õ–ï–ù–ò–ï_–§–†–û–ù–¢–ï–ù–î–ê.md`

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** $(date '+%Y-%m-%d %H:%M:%S')


