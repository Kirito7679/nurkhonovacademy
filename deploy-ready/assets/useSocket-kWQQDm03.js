import{a,r as s}from"./vendor-react-CYnsZ-uh.js";import{au as i}from"./vendor-other-G1F3Ub8s.js";import{u}from"./index-B_lpl_ns.js";const l=()=>{const t="https://api.academy.dilmurodnurkhonov.uz/api".replace(/\/api$/,"");return t.includes("localhost")&&window.location.hostname!=="localhost"?"https://api.academy.dilmurodnurkhonov.uz":t},p=l(),k=()=>{const{token:o}=u(),r=a(),t=s.useRef(null),[c,n]=s.useState(!1);return s.useEffect(()=>{if(!o){n(!1);return}const e=i(p,{auth:{token:o}});return t.current=e,e.on("new-notification",()=>{r.invalidateQueries("notifications")}),e.on("connect",()=>{n(!0)}),e.on("disconnect",()=>{n(!1)}),e.on("error",f=>{}),()=>{e.disconnect(),n(!1)}},[o,r]),{socket:t.current,isConnected:c}};export{k as u};
