import{h as p,e as h,j as e,o as f,p as j,L as o}from"./vendor-react-CG6qJQiR.js";import{a as m}from"./index-Dz20hCjv.js";import"./vendor-other-CkIi3ZhG.js";import"./vendor-network-4X8DPy3m.js";import"./vendor-i18n-DHwuzpMN.js";function v(){const{t}=p(),{data:x}=h("teacherStats",async()=>{const[s,l]=await Promise.all([m.get("/students"),m.get("/courses")]),a=s.data.data||[],d=l.data.data||[],u=a,n=[];return u.forEach(i=>{i.studentCourses&&i.studentCourses.forEach(c=>{c.status==="PENDING"&&n.push(c)})}),{totalStudents:a.length,totalCourses:d.length,pendingRequests:n.slice(0,5)}}),r=x||{totalStudents:0,totalCourses:0,pendingRequests:[]};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-gradient mb-4 md:mb-8",children:"Панель управления"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsx("div",{className:"card card-hover p-6 bg-gradient-to-br from-primary-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-primary text-white shadow-glow",children:e.jsx(f,{className:"h-7 w-7"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-semibold text-primary-700",children:t("students.totalStudents",{defaultValue:"Всего студентов"})}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-primary-900",children:r.totalStudents})]})]})}),e.jsx("div",{className:"card card-hover p-6 bg-gradient-to-br from-accent-50 to-emerald-50",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-xl bg-gradient-accent text-white shadow-glow",children:e.jsx(j,{className:"h-7 w-7"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("p",{className:"text-sm font-semibold text-accent-700",children:t("courses.totalCourses",{defaultValue:"Всего курсов"})}),e.jsx("p",{className:"text-2xl md:text-3xl font-bold text-accent-900",children:r.totalCourses})]})]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-bold text-primary-900",children:t("students.recentRequests",{defaultValue:"Последние запросы на курсы"})}),e.jsxs(o,{to:"/teacher/students",className:"text-primary-700 hover:text-primary-800 text-sm font-semibold transition-colors underline decoration-2 underline-offset-2",children:[t("students.viewAll",{defaultValue:"Посмотреть всех"})," →"]})]}),r.pendingRequests.length===0?e.jsx("p",{className:"text-primary-600 text-center py-8 font-medium",children:t("students.noPendingRequests",{defaultValue:"Нет ожидающих запросов"})}):e.jsx("div",{className:"space-y-4",children:r.pendingRequests.map(s=>{var l,a,d;return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 p-3 md:p-4 border-2 border-primary-200 rounded-lg hover:border-primary-400 transition-colors bg-gradient-to-r from-primary-50/50 to-transparent",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"font-semibold text-primary-900 break-words",children:[(l=s.student)==null?void 0:l.firstName," ",(a=s.student)==null?void 0:a.lastName]}),e.jsx("p",{className:"text-sm text-primary-700 break-words",children:(d=s.course)==null?void 0:d.title}),e.jsx("p",{className:"text-xs text-primary-600 mt-1",children:new Date(s.purchaseRequestedAt).toLocaleDateString("ru-RU")})]}),e.jsx(o,{to:`/teacher/students/${s.studentId}`,className:"btn-secondary px-4 py-2 text-sm whitespace-nowrap",children:t("students.review",{defaultValue:"Рассмотреть"})})]},s.id)})})]})]})}export{v as default};
