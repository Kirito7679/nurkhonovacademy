import{k as ye,ae as ve,d as ge,u as we,r as o,e as ae,f as p,W as ke,j as e,ar as Me,aR as le,aS as re,aT as ie,T as ne,aN as F,s as Ce,ai as De,aj as Te,L as C,aU as Le,aQ as Se,ah as Ee,a0 as Ie,a1 as Ve,aV as h,aW as B,aX as Fe,a2 as U,aw as oe}from"./vendor-BCot374K.js";import{C as ce,a as u}from"./index-CpWM4Ysi.js";import{E as Ue}from"./ErrorModal-CwJ8GHDE.js";const Ae=Ve({title:U().min(1,"–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"),description:U().optional(),thumbnailUrl:U().url("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç URL").optional().or(oe("")),price:h().min(0).default(0),trialLessonId:U().uuid().optional().or(oe("")),isVisible:Fe().default(!0),language:B(["ru","en","uz","kk"]).default("ru"),category:B(["LANGUAGE","BUSINESS","IT","DESIGN","MARKETING","FINANCE","HEALTH","EDUCATION","OTHER"]).optional(),subscriptionType:B(["FREE","TRIAL","PAID"]).optional(),trialPeriodDays:h().int().min(0).optional(),price30Days:h().min(0).optional(),price3Months:h().min(0).optional(),price6Months:h().min(0).optional(),price1Year:h().min(0).optional()});function Pe(){const{t}=ye(),{id:n}=ve(),D=ge(),T=we(),d=!!n,[L,K]=o.useState(""),W=o.useRef(!1),{data:r,isLoading:de}=ae(["course",n],async()=>(await u.get(`/courses/${n}`)).data.data,{enabled:d}),{data:me,refetch:A}=ae(["modules",n],async()=>(await u.get(`/modules/courses/${n}/modules`)).data.data||[],{enabled:d&&!!n}),[b,S]=o.useState(null),[E,j]=o.useState(""),[O,f]=o.useState(""),[N,y]=o.useState(0),[m,v]=o.useState("info"),[X,ue]=o.useState(new Set),[I,g]=o.useState(!1),[J,$]=o.useState({isOpen:!1,message:""}),[R,P]=o.useState({isOpen:!1,moduleId:null}),[xe,G]=o.useState(!1),w=p(async s=>(await u.post("/courses",s)).data.data,{onSuccess:s=>{T.invalidateQueries("teacherCourses"),D(`/teacher/courses/${s?.id}/edit`)},onError:s=>{s.response?.status===403&&s.response?.data?.message?.includes("–æ–ø–ª–∞—Ç–∏—Ç—å")?D("/teacher/payment"):$({isOpen:!0,message:s.response?.data?.message||"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫—É—Ä—Å–∞"})}}),Q=p(async s=>(await u.put(`/courses/${n}`,s)).data.data,{onSuccess:()=>{T.invalidateQueries(["course",n]),T.invalidateQueries("teacherCourses")}}),Y=p(async s=>(await u.post(`/modules/courses/${n}/modules`,s)).data.data,{onSuccess:()=>{A(),j(""),f(""),y(0),S(null),g(!1)}}),q=p(async s=>(await u.put(`/modules/${b?.id}`,s)).data.data,{onSuccess:()=>{A(),j(""),f(""),y(0),S(null),g(!1)}}),pe=p(async s=>{await u.delete(`/modules/${s}`)},{onSuccess:()=>{A()}}),V=p(async()=>{await u.delete(`/courses/${n}`)},{onSuccess:()=>{T.invalidateQueries("teacherCourses"),D("/teacher/courses")}}),{register:i,handleSubmit:Z,formState:{errors:a},reset:he,watch:x,setValue:_}=ke({resolver:Ie(Ae),defaultValues:{title:"",description:"",thumbnailUrl:"",price:0,trialLessonId:"",isVisible:!0,language:"ru",category:void 0,subscriptionType:void 0,trialPeriodDays:void 0,price30Days:void 0,price3Months:void 0,price6Months:void 0,price1Year:void 0}});o.useEffect(()=>{r&&d&&!W.current&&(he({title:r.title,description:r.description||"",thumbnailUrl:r.thumbnailUrl||"",price:r.price,trialLessonId:r.trialLessonId||"",isVisible:r.isVisible!==void 0?r.isVisible:!0,language:r.language||"ru",category:r.category||void 0,subscriptionType:r.subscriptionType||void 0,trialPeriodDays:r.trialPeriodDays||void 0,price30Days:r.price30Days||void 0,price3Months:r.price3Months||void 0,price6Months:r.price6Months||void 0,price1Year:r.price1Year||void 0}),r.thumbnailUrl&&K(r.thumbnailUrl),W.current=!0)},[r,d]);const ee=s=>{d?Q.mutate(s):w.mutate(s)};if(de)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block relative",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-500"})}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"–ó–∞–≥—Ä—É–∑–∫–∞ –∫—É—Ä—Å–∞..."})]});const k=r?.lessons||[],H=me||[],se=s=>{const l=s.target.value;K(l)},be=()=>{if(!E.trim()){$({isOpen:!0,message:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—è"});return}b?q.mutate({title:E,description:O||void 0,order:typeof N=="number"?N:0}):Y.mutate({title:E,description:O||void 0,order:typeof N=="number"?N:0})},je=s=>{const l=new Set(X);l.has(s)?l.delete(s):l.add(s),ue(l)},fe=s=>{S(s),j(s.title),f(s.description||""),y(s.order),g(!0),v("modules")},te=()=>{S(null),j(""),f(""),y(0),g(!1)},Ne=s=>{P({isOpen:!0,moduleId:s})};return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>D("/teacher/courses"),className:"flex items-center text-neutral-600 hover:text-primary-600 mb-6 transition-colors animate-slide-in",children:[e.jsx(Me,{className:"h-5 w-5 mr-2"}),t("common.back")," ",t("courses.title")]}),e.jsx("div",{className:"relative mb-8 animate-fade-scale",children:e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-5xl font-bold text-gradient",children:d?"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫—É—Ä—Å":"–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å"})}),d?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"border-b border-neutral-200",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{type:"button",onClick:()=>v("info"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="info"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è"}),e.jsx("button",{type:"button",onClick:()=>v("modules"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="modules"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–ú–æ–¥—É–ª–∏"}),e.jsx("button",{type:"button",onClick:()=>v("lessons"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="lessons"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–£—Ä–æ–∫–∏"}),e.jsx("button",{type:"button",onClick:()=>v("tests"),className:`px-4 py-2 text-sm font-medium transition-colors ${m==="tests"?"border-b-2 border-primary-500 text-primary-600":"text-neutral-600 hover:text-neutral-900"}`,children:"–¢–µ—Å—Ç—ã"})]})}),m==="info"&&e.jsx("div",{className:"card p-6",children:e.jsxs("form",{onSubmit:Z(ee),className:"space-y-6",children:[e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.1s"},children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-neutral-700 mb-2",children:t("courses.courseTitle")}),e.jsx("input",{...i("title"),type:"text",className:"input-field",placeholder:t("courses.courseTitle")}),a.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.2s"},children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-neutral-700 mb-2",children:t("courses.courseDescription")}),e.jsx("div",{className:"rich-text-editor",children:e.jsx(le,{theme:"snow",value:x("description")||"",onChange:s=>{_("description",s,{shouldValidate:!0})},modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","color","background","align","link"],placeholder:t("courses.courseDescription"),className:"bg-white"})}),e.jsx("style",{children:`
                  .rich-text-editor .ql-container {
                    min-height: 200px;
                    font-size: 14px;
                  }
                  .rich-text-editor .ql-editor {
                    min-height: 200px;
                  }
                  .rich-text-editor .ql-toolbar {
                    border-top-left-radius: 8px;
                    border-top-right-radius: 8px;
                    border: 1px solid #e5e7eb;
                    background: #f9fafb;
                  }
                  .rich-text-editor .ql-container {
                    border-bottom-left-radius: 8px;
                    border-bottom-right-radius: 8px;
                    border: 1px solid #e5e7eb;
                    border-top: none;
                  }
                  .rich-text-editor .ql-editor.ql-blank::before {
                    color: #9ca3af;
                    font-style: normal;
                  }
                `})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.3s"},children:[e.jsx("label",{htmlFor:"thumbnailUrl",className:"block text-sm font-medium text-neutral-700 mb-2",children:"URL –æ–±–ª–æ–∂–∫–∏ –∫—É—Ä—Å–∞"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{...i("thumbnailUrl"),type:"url",onChange:s=>{se(s),i("thumbnailUrl").onChange(s)},className:"input-field",placeholder:"https://..."}),(L||r?.thumbnailUrl)&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-neutral-200 shadow-soft animate-fade-scale",children:[e.jsx("img",{src:L||r?.thumbnailUrl,alt:"Course thumbnail",className:"w-full h-48 object-cover",onError:s=>{s.target.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-white text-sm",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:t("courses.preview",{defaultValue:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"})})]})})]})]}),a.thumbnailUrl&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.thumbnailUrl.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.4s"},children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-neutral-700 mb-2",children:t("courses.coursePrice")}),e.jsx("input",{...i("price",{valueAsNumber:!0}),type:"number",step:"0.01",min:"0",className:"input-field",placeholder:"0"}),a.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.price.message})]}),e.jsx("div",{className:"animate-slide-in",style:{animationDelay:"0.45s"},children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"isVisible",className:"block text-sm font-medium text-neutral-700 mb-1",children:"–í–∏–¥–∏–º–æ—Å—Ç—å –∫—É—Ä—Å–∞"}),e.jsx("p",{className:"text-xs text-neutral-500",children:x("isVisible")?"–ö—É—Ä—Å –≤–∏–¥–µ–Ω –≤—Å–µ–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º –≤ –∫–∞—Ç–∞–ª–æ–≥–µ":"–ö—É—Ä—Å —Å–∫—Ä—ã—Ç –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{...i("isVisible"),type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-neutral-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.48s"},children:[e.jsxs("label",{htmlFor:"language",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–Ø–∑—ã–∫ –∫—É—Ä—Å–∞ ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{...i("language"),className:"input-field",children:[e.jsx("option",{value:"ru",children:"üá∑üá∫ –†—É—Å—Å–∫–∏–π"}),e.jsx("option",{value:"en",children:"üá∫üá∏ English"}),e.jsx("option",{value:"uz",children:"üá∫üáø O'zbek"}),e.jsx("option",{value:"kk",children:"üá∞üáø “ö–∞–∑–∞“õ—à–∞"})]}),e.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"–ö—É—Ä—Å –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ —Å—Ç—É–¥–µ–Ω—Ç–∞–º —Å –≤—ã–±—Ä–∞–Ω–Ω—ã–º —è–∑—ã–∫–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞"}),a.language&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.language.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.48s"},children:[e.jsxs("label",{htmlFor:"category",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∫—É—Ä—Å–∞ ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsxs("select",{...i("category"),className:"input-field",children:[e.jsx("option",{value:"",children:"–ù–µ –≤—ã–±—Ä–∞–Ω–∞"}),e.jsx("option",{value:"LANGUAGE",children:"–Ø–∑—ã–∫–æ–≤—ã–µ"}),e.jsx("option",{value:"BUSINESS",children:"–ë–∏–∑–Ω–µ—Å"}),e.jsx("option",{value:"IT",children:"IT –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ"}),e.jsx("option",{value:"DESIGN",children:"–î–∏–∑–∞–π–Ω"}),e.jsx("option",{value:"MARKETING",children:"–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥"}),e.jsx("option",{value:"FINANCE",children:"–§–∏–Ω–∞–Ω—Å—ã"}),e.jsx("option",{value:"HEALTH",children:"–ó–¥–æ—Ä–æ–≤—å–µ"}),e.jsx("option",{value:"EDUCATION",children:"–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ"}),e.jsx("option",{value:"OTHER",children:"–î—Ä—É–≥–æ–µ"})]}),e.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é –¥–ª—è –ª—É—á—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∫—É—Ä—Å–æ–≤"}),a.category&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.category.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.49s"},children:[e.jsxs("label",{htmlFor:"subscriptionType",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–¢–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏ ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsxs("select",{...i("subscriptionType"),className:"input-field",children:[e.jsx("option",{value:"",children:"–ù–µ –≤—ã–±—Ä–∞–Ω"}),e.jsx("option",{value:"FREE",children:"–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π"}),e.jsx("option",{value:"TRIAL",children:"–° –ø—Ä–æ–±–Ω—ã–º –ø–µ—Ä–∏–æ–¥–æ–º"}),e.jsx("option",{value:"PAID",children:"–ü–ª–∞—Ç–Ω—ã–π"})]}),a.subscriptionType&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.subscriptionType.message})]}),x("subscriptionType")==="TRIAL"&&e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.495s"},children:[e.jsxs("label",{htmlFor:"trialPeriodDays",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–ü—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥ (–¥–Ω–µ–π) ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsx("input",{...i("trialPeriodDays",{valueAsNumber:!0}),type:"number",min:"0",className:"input-field",placeholder:"7"}),e.jsx("p",{className:"mt-1 text-xs text-neutral-500",children:"–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫—É—Ä—Å—É"}),a.trialPeriodDays&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.trialPeriodDays.message})]}),x("subscriptionType")==="PAID"&&e.jsx("div",{className:"space-y-4 animate-slide-in",style:{animationDelay:"0.5s"},children:e.jsxs("div",{className:"p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:"–¶–µ–Ω—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤ –ø–æ–¥–ø–∏—Å–∫–∏"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price30Days",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–¶–µ–Ω–∞ –∑–∞ 30 –¥–Ω–µ–π (—Å—É–º) ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsx("input",{...i("price30Days",{valueAsNumber:!0}),type:"number",min:"0",step:"1000",className:"input-field",placeholder:"500000"}),a.price30Days&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.price30Days.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price3Months",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–¶–µ–Ω–∞ –∑–∞ 3 –º–µ—Å—è—Ü–∞ (—Å—É–º) ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsx("input",{...i("price3Months",{valueAsNumber:!0}),type:"number",min:"0",step:"1000",className:"input-field",placeholder:"1200000"}),a.price3Months&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.price3Months.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price6Months",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–¶–µ–Ω–∞ –∑–∞ 6 –º–µ—Å—è—Ü–µ–≤ (—Å—É–º) ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsx("input",{...i("price6Months",{valueAsNumber:!0}),type:"number",min:"0",step:"1000",className:"input-field",placeholder:"2000000"}),a.price6Months&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.price6Months.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"price1Year",className:"block text-sm font-medium text-neutral-700 mb-2",children:["–¶–µ–Ω–∞ –∑–∞ –≥–æ–¥ (—Å—É–º) ",e.jsx("span",{className:"text-neutral-500 text-xs",children:"(–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"})]}),e.jsx("input",{...i("price1Year",{valueAsNumber:!0}),type:"number",min:"0",step:"1000",className:"input-field",placeholder:"3500000"}),a.price1Year&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.price1Year.message})]})]}),e.jsx("p",{className:"mt-3 text-xs text-neutral-500",children:"–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ü–µ–Ω—ã –¥–ª—è –ø–µ—Ä–∏–æ–¥–æ–≤ –ø–æ–¥–ø–∏—Å–∫–∏. –°—Ç—É–¥–µ–Ω—Ç—ã —Å–º–æ–≥—É—Ç –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–∏–æ–¥ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –¥–æ—Å—Ç—É–ø–∞ –∏–ª–∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏."})]})}),d&&k.length>0&&e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.5s"},children:[e.jsxs("label",{htmlFor:"trialLessonId",className:"block text-sm font-medium text-neutral-700 mb-2",children:[t("courses.trialLesson",{defaultValue:"–ü—Ä–æ–±–Ω—ã–π —É—Ä–æ–∫"})," ",e.jsxs("span",{className:"text-neutral-500 text-xs",children:["(",t("common.optional",{defaultValue:"–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"}),")"]})]}),e.jsxs("select",{...i("trialLessonId"),className:"input-field",children:[e.jsx("option",{value:"",children:t("courses.notSelected",{defaultValue:"–ù–µ –≤—ã–±—Ä–∞–Ω"})}),k.map(s=>e.jsx("option",{value:s.id,children:s.title},s.id))]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",disabled:w.isLoading||Q.isLoading,className:"btn-primary flex-1 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),w.isLoading||Q.isLoading?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"‚ü≥"})," ",e.jsx("span",{children:t("common.loading")})]}):e.jsx("span",{children:t("common.save")})]}),d&&e.jsxs("button",{type:"button",onClick:()=>G(!0),disabled:V.isLoading,className:"btn-secondary border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ne,{className:"h-5 w-5 mr-2"}),V.isLoading?"–£–¥–∞–ª–µ–Ω–∏–µ...":"–£–¥–∞–ª–∏—Ç—å –∫—É—Ä—Å"]})]})]})}),m==="modules"&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:t("modules.courseModules",{defaultValue:"–ú–æ–¥—É–ª–∏ –∫—É—Ä—Å–∞"})}),e.jsxs("button",{type:"button",onClick:()=>{g(!I),I&&te()},className:"btn-primary text-sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),I?"–û—Ç–º–µ–Ω–∞":"–°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å"]})]}),I&&e.jsxs("div",{className:"mb-6 p-4 border border-primary-200 rounded-lg bg-primary-50",children:[e.jsx("h3",{className:"text-sm font-semibold text-neutral-700 mb-3",children:b?t("modules.editModule"):t("modules.newModule",{defaultValue:"–ù–æ–≤—ã–π –º–æ–¥—É–ª—å"})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:E,onChange:s=>j(s.target.value),placeholder:t("modules.moduleTitle"),className:"input-field"}),e.jsx("textarea",{value:O,onChange:s=>f(s.target.value),placeholder:t("modules.moduleDescriptionOptional",{defaultValue:"–û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"}),rows:2,className:"input-field"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("label",{className:"text-sm text-neutral-700",children:[t("modules.order",{defaultValue:"–ü–æ—Ä—è–¥–æ–∫"}),":"]}),e.jsx("input",{type:"number",value:N,onChange:s=>{const l=s.target.value;y(l===""?"":Number(l))},min:"0",className:"input-field w-20"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:be,disabled:Y.isLoading||q.isLoading,className:"btn-primary text-sm flex-1 disabled:opacity-50",children:Y.isLoading||q.isLoading?t("common.loading"):t(b?"common.save":"common.create")}),b&&e.jsx("button",{type:"button",onClick:te,className:"btn-secondary text-sm",children:t("common.cancel")})]})]})]}),H.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ce,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-500 text-sm",children:t("modules.noModules")}),e.jsx("p",{className:"text-neutral-400 text-xs mt-2",children:t("modules.createFirstModule",{defaultValue:"–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—ã–π –º–æ–¥—É–ª—å –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–∫–æ–≤"})})]}):e.jsx("div",{className:"space-y-3",children:H.sort((s,l)=>s.order-l.order).map(s=>{const l=k.filter(c=>c.moduleId===s.id),M=X.has(s.id);return e.jsxs("div",{className:"border border-neutral-200 rounded-lg overflow-hidden hover:border-primary-300 transition-all",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 cursor-pointer bg-neutral-50 hover:bg-neutral-100",onClick:()=>je(s.id),children:[e.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[M?e.jsx(De,{className:"h-4 w-4 text-neutral-400"}):e.jsx(Te,{className:"h-4 w-4 text-neutral-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm font-semibold text-neutral-900",children:s.title}),s.description&&e.jsx("p",{className:"text-xs text-neutral-500 mt-1",children:s.description}),e.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:["–ü–æ—Ä—è–¥–æ–∫: ",s.order," ‚Ä¢ –£—Ä–æ–∫–æ–≤: ",l.length]})]})]}),e.jsxs("div",{className:"flex gap-2",onClick:c=>c.stopPropagation(),children:[e.jsx(C,{to:`/teacher/courses/${n}/lessons/new?moduleId=${s.id}`,className:"text-primary-600 hover:text-primary-700 text-sm transition-colors flex items-center gap-1 px-2 py-1 rounded hover:bg-primary-50",title:t("lessons.addToModule",{defaultValue:"–î–æ–±–∞–≤–∏—Ç—å —É—Ä–æ–∫ –≤ –º–æ–¥—É–ª—å"}),children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>fe(s),className:"text-primary-600 hover:text-primary-700 text-sm transition-colors px-2 py-1 rounded hover:bg-primary-50",title:t("modules.editModule"),children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ne(s.id),className:"text-red-500 hover:text-red-600 text-sm transition-colors px-2 py-1 rounded hover:bg-red-50",title:t("modules.deleteModule",{defaultValue:"–£–¥–∞–ª–∏—Ç—å –º–æ–¥—É–ª—å"}),children:e.jsx(ne,{className:"h-4 w-4"})})]})]}),M&&e.jsx("div",{className:"border-t border-neutral-200 bg-white",children:l.length>0?e.jsx("div",{className:"p-3 space-y-2",children:l.sort((c,z)=>c.order-z.order).map((c,z)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-50 rounded hover:bg-neutral-100 transition-colors",children:[e.jsxs("span",{className:"text-xs text-neutral-700",children:[z+1,". ",c.title]}),e.jsx(C,{to:`/teacher/courses/${n}/lessons/${c.id}/edit`,className:"text-primary-600 hover:text-primary-700 text-xs transition-colors",children:t("common.edit")})]},c.id))}):e.jsx("div",{className:"p-3 text-center",children:e.jsx("p",{className:"text-xs text-neutral-400",children:t("modules.noLessonsInModule",{defaultValue:"–ù–µ—Ç —É—Ä–æ–∫–æ–≤ –≤ —ç—Ç–æ–º –º–æ–¥—É–ª–µ"})})})})]},s.id)})})]}),m==="lessons"&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:t("courses.allLessons",{defaultValue:"–í—Å–µ —É—Ä–æ–∫–∏ –∫—É—Ä—Å–∞"})}),e.jsxs(C,{to:`/teacher/courses/${n}/lessons/new`,className:"btn-primary text-sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),t("lessons.createLesson")]})]}),k.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Se,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-500 text-sm",children:t("lessons.noLessons")})]}):e.jsx("div",{className:"space-y-2",children:k.sort((s,l)=>s.order-l.order).map((s,l)=>{const M=H.find(c=>c.id===s.moduleId);return e.jsxs("div",{className:"flex items-center justify-between p-3 border border-neutral-200 rounded-lg hover:border-primary-300 hover:bg-neutral-50 transition-all",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:"text-sm font-medium text-neutral-900",children:[l+1,". ",s.title]}),M&&e.jsxs("p",{className:"text-xs text-neutral-400 mt-1",children:[t("modules.title"),": ",M.title]})]}),e.jsx(C,{to:`/teacher/courses/${n}/lessons/${s.id}/edit`,className:"text-primary-600 hover:text-primary-700 text-sm transition-colors",children:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"})]},s.id)})})]}),m==="tests"&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:"–ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã"}),e.jsxs(C,{to:`/teacher/courses/${n}/tests/new`,className:"btn-primary text-sm",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç"]})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ee,{className:"h-12 w-12 text-neutral-300 mx-auto mb-4"}),e.jsx("p",{className:"text-neutral-500 text-sm",children:"–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–Ω–∞–Ω–∏–π"})]})]})]}):e.jsx("div",{className:"card p-6 animate-fade-scale",children:e.jsxs("form",{onSubmit:Z(ee),className:"space-y-6",children:[e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.1s"},children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-neutral-700 mb-2",children:"–ù–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞"}),e.jsx("input",{...i("title"),type:"text",className:"input-field",placeholder:"–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∫—É—Ä—Å–∞"}),a.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.title.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.2s"},children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-neutral-700 mb-2",children:"–û–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞"}),e.jsx("div",{className:"rich-text-editor",children:e.jsx(le,{theme:"snow",value:x("description")||"",onChange:s=>{_("description",s,{shouldValidate:!0})},modules:{toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["link"],["clean"]]},formats:["header","bold","italic","underline","strike","list","bullet","color","background","align","link"],placeholder:"–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∫—É—Ä—Å–∞",className:"bg-white"})})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.3s"},children:[e.jsx("label",{htmlFor:"thumbnailUrl",className:"block text-sm font-medium text-neutral-700 mb-2",children:"URL –æ–±–ª–æ–∂–∫–∏ –∫—É—Ä—Å–∞"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{...i("thumbnailUrl"),type:"url",onChange:s=>{se(s),i("thumbnailUrl").onChange(s)},className:"input-field",placeholder:"https://..."}),L&&e.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-neutral-200 shadow-soft animate-fade-scale",children:[e.jsx("img",{src:L,alt:"Course thumbnail",className:"w-full h-48 object-cover",onError:s=>{s.target.style.display="none"}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent flex items-end p-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-white text-sm",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{children:"–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä"})]})})]})]}),a.thumbnailUrl&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.thumbnailUrl.message})]}),e.jsxs("div",{className:"animate-slide-in",style:{animationDelay:"0.4s"},children:[e.jsx("label",{htmlFor:"price",className:"block text-sm font-medium text-neutral-700 mb-2",children:"–¶–µ–Ω–∞ –∫—É—Ä—Å–∞"}),e.jsx("input",{...i("price",{valueAsNumber:!0}),type:"number",step:"0.01",min:"0",className:"input-field",placeholder:"0"}),a.price&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:a.price.message})]}),e.jsx("div",{className:"animate-slide-in",style:{animationDelay:"0.45s"},children:e.jsxs("div",{className:"flex items-center justify-between p-4 bg-neutral-50 rounded-lg border border-neutral-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"isVisible",className:"block text-sm font-medium text-neutral-700 mb-1",children:"–í–∏–¥–∏–º–æ—Å—Ç—å –∫—É—Ä—Å–∞"}),e.jsx("p",{className:"text-xs text-neutral-500",children:x("isVisible")?"–ö—É—Ä—Å –≤–∏–¥–µ–Ω –≤—Å–µ–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º –≤ –∫–∞—Ç–∞–ª–æ–≥–µ":"–ö—É—Ä—Å —Å–∫—Ä—ã—Ç –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞ –∏ –±—É–¥–µ—Ç –≤–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–º —Å—Ç—É–¥–µ–Ω—Ç–∞–º"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{...i("isVisible"),type:"checkbox",className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-neutral-300 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-neutral-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-primary-600"})]})]})}),e.jsx("div",{className:"animate-slide-in",style:{animationDelay:"0.5s"},children:e.jsxs("button",{type:"submit",disabled:w.isLoading,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(ie,{className:"h-5 w-5 mr-2"}),w.isLoading?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"‚ü≥"})," ",e.jsx("span",{children:"–°–æ–∑–¥–∞–Ω–∏–µ..."})]}):e.jsx("span",{children:"–°–æ–∑–¥–∞—Ç—å –∫—É—Ä—Å"})]})})]})}),e.jsx(Ue,{isOpen:J.isOpen,onClose:()=>$({isOpen:!1,message:""}),message:J.message}),e.jsx(ce,{isOpen:R.isOpen,onClose:()=>P({isOpen:!1,moduleId:null}),onConfirm:()=>{R.moduleId&&(pe.mutate(R.moduleId),P({isOpen:!1,moduleId:null}))},title:t("modules.deleteModule",{defaultValue:"–£–¥–∞–ª–∏—Ç—å –º–æ–¥—É–ª—å"}),message:t("modules.deleteConfirm",{defaultValue:"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –º–æ–¥—É–ª—å? –í—Å–µ —É—Ä–æ–∫–∏ –≤ –º–æ–¥—É–ª–µ –æ—Å—Ç–∞–Ω—É—Ç—Å—è, –Ω–æ –±—É–¥—É—Ç –±–µ–∑ –º–æ–¥—É–ª—è."}),variant:"danger"}),e.jsx(ce,{isOpen:xe,onClose:()=>G(!1),onConfirm:()=>{V.mutate(),G(!1)},title:"–£–¥–∞–ª–µ–Ω–∏–µ –∫—É—Ä—Å–∞",message:"–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç –∫—É—Ä—Å? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –í—Å–µ —É—Ä–æ–∫–∏ –∏ –º–æ–¥—É–ª–∏ —Ç–∞–∫–∂–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã.",confirmText:V.isLoading?"–£–¥–∞–ª–µ–Ω–∏–µ...":"–£–¥–∞–ª–∏—Ç—å",cancelText:"–û—Ç–º–µ–Ω–∞",variant:"danger"})]})}export{Pe as default};
