# üîë –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ "signature verification failed"

## –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞ `Failed to access Supabase Storage: signature verification failed` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á Supabase**.

## –ü—Ä–∏—á–∏–Ω–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase Storage (–∑–∞–≥—Ä—É–∑–∫–∞/—É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤) –Ω—É–∂–µ–Ω **`service_role` –∫–ª—é—á**, –∞ –Ω–µ `anon` –∫–ª—é—á.

–ï—Å–ª–∏ –≤ Railway —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `SUPABASE_ANON_KEY` –≤–º–µ—Å—Ç–æ `SUPABASE_SERVICE_KEY`, –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á, –≤–æ–∑–Ω–∏–∫–Ω–µ—Ç —ç—Ç–∞ –æ—à–∏–±–∫–∞.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á –∏–∑ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Supabase Dashboard](https://app.supabase.com)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Settings** ‚Üí **API** (–∏–ª–∏ **Project Settings** ‚Üí **API**)
4. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é **"Project API keys"**
5. –ù–∞–π–¥–∏—Ç–µ –∫–ª—é—á —Å –ø–æ–º–µ—Ç–∫–æ–π **"service_role"** (–ù–ï "anon"!)
6. ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –≠—Ç–æ –∫–ª—é—á —Å –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞
7. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)

**–ü—Ä–∏–º–µ—Ä service_role –∫–ª—é—á–∞:**
```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6bWt5cWt...
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Railway

**–ù—É–∂–Ω—ã –¢–û–õ–¨–ö–û —ç—Ç–∏ –¥–≤–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**
- ‚úÖ `SUPABASE_URL` - URL –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://czmkyqkibxrryjpjfdsb.supabase.co`)
- ‚úÖ `SUPABASE_SERVICE_KEY` - **service_role –∫–ª—é—á** (–ù–ï anon!)

**–ù–ï –Ω—É–∂–Ω—ã:**
- ‚ùå `SUPABASE_ANON_KEY` - —É–¥–∞–ª–∏—Ç–µ, –µ—Å–ª–∏ –µ—Å—Ç—å

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Railway

#### –í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ Railway Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ [Railway Dashboard](https://railway.app)
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–µ—Ä–≤–∏—Å —Å backend
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Variables** (–∏–ª–∏ **Environment**)
5. –ù–∞–π–¥–∏—Ç–µ `SUPABASE_SERVICE_KEY`
6. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç - –Ω–∞–∂–º–∏—Ç–µ **"New Variable"**
7. –í—Å—Ç–∞–≤—å—Ç–µ **service_role –∫–ª—é—á** –∏–∑ Supabase
8. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

#### –í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ Railway CLI

```bash
cd backend
npx @railway/cli variables --set "SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

**–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ `...` –Ω–∞ –ø–æ–ª–Ω—ã–π service_role –∫–ª—é—á –∏–∑ Supabase.

### –®–∞–≥ 4: –£–¥–∞–ª–∏—Ç–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–µ—Å–ª–∏ –µ—Å—Ç—å)

–ï—Å–ª–∏ –≤ Railway –µ—Å—Ç—å `SUPABASE_ANON_KEY`, —É–¥–∞–ª–∏—Ç–µ –µ–≥–æ:

```bash
npx @railway/cli variables --unset "SUPABASE_ANON_KEY"
```

–ò–ª–∏ —á–µ—Ä–µ–∑ Dashboard:
1. –ù–∞–π–¥–∏—Ç–µ `SUPABASE_ANON_KEY` –≤ —Å–ø–∏—Å–∫–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —É–¥–∞–ª–µ–Ω–∏—è (üóëÔ∏è)
3. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã.

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```bash
cd backend
npx @railway/cli variables
```

–î–æ–ª–∂–Ω—ã –±—ã—Ç—å:
- ‚úÖ `SUPABASE_URL` = `https://czmkyqkibxrryjpjfdsb.supabase.co`
- ‚úÖ `SUPABASE_SERVICE_KEY` = `eyJ...` (–¥–ª–∏–Ω–Ω—ã–π –∫–ª—é—á, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ`)
- ‚ùå `SUPABASE_ANON_KEY` - –ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞:

**–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π service_role –∫–ª—é—á:**
- –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ`
- –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π (200+ —Å–∏–º–≤–æ–ª–æ–≤)
- –í –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `"role":"service_role"`

**–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π anon –∫–ª—é—á:**
- –¢–æ–∂–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ`
- –ù–æ –≤ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ —Å–æ–¥–µ—Ä–∂–∏—Ç `"role":"anon"`

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **–ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ anon –∫–ª—é—á** –¥–ª—è Storage –æ–ø–µ—Ä–∞—Ü–∏–π
2. **–ù–ï –ø—É–±–ª–∏–∫—É–π—Ç–µ service_role –∫–ª—é—á** –≤ –ø—É–±–ª–∏—á–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö
3. **–•—Ä–∞–Ω–∏—Ç–µ –∫–ª—é—á —Ç–æ–ª—å–∫–æ –≤ Railway** –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
4. **–ù–µ –∫–æ–º–º–∏—Ç—å—Ç–µ –∫–ª—é—á** –≤ Git

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–ª—é—á–∞:

1. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã (Railway –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
2. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –ø—Ä–æ—Ñ–∏–ª—è
3. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è:
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway: `npx @railway/cli logs`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤)
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ bucket `avatars` —Å–æ–∑–¥–∞–Ω –≤ Supabase

## üìù –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**–í Railway Variables –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å:**

```
SUPABASE_URL=https://czmkyqkibxrryjpjfdsb.supabase.co
SUPABASE_SERVICE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN6bWt5cWt...
```

**–ù–ï –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
```
SUPABASE_ANON_KEY=...  ‚ùå –£–¥–∞–ª–∏—Ç–µ —ç—Ç–æ!
```

## ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —É—Ä–æ–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ "signature verification failed"

---

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è**, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. Bucket `avatars` —Å–æ–∑–¥–∞–Ω –≤ Supabase Storage
2. Bucket `lessons` —Å–æ–∑–¥–∞–Ω –≤ Supabase Storage (–¥–ª—è —Ñ–∞–π–ª–æ–≤ —É—Ä–æ–∫–æ–≤)
3. –ö–ª—é—á —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é (–±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –Ω–∞—á–∞–ª–µ/–∫–æ–Ω—Ü–µ)
4. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω–æ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
