# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 429 –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∞ 429 (Too Many Requests) –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
- –°–æ–æ–±—â–µ–Ω–∏–µ: "Failed to load resource: the server responded with a status of 429"
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É

**–ü—Ä–∏—á–∏–Ω–∞:**
- Rate limit –¥–ª—è –ª–æ–≥–∏–Ω–∞ –±—ã–ª —Å–ª–∏—à–∫–æ–º —Å—Ç—Ä–æ–≥–∏–º: –≤—Å–µ–≥–æ 20 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ 15 –º–∏–Ω—É—Ç
- –ü—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ–ø—ã—Ç–∫–∞—Ö –≤—Ö–æ–¥–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ —Å –æ—à–∏–±–∫–∞–º–∏) –ª–∏–º–∏—Ç –±—ã—Å—Ç—Ä–æ –∏—Å—á–µ—Ä–ø—ã–≤–∞–ª—Å—è
- –£—Å–ø–µ—à–Ω—ã–µ –ª–æ–≥–∏–Ω—ã —Ç–æ–∂–µ —Å—á–∏—Ç–∞–ª–∏—Å—å –≤ –ª–∏–º–∏—Ç

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Backend:
1. **–£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç –¥–ª—è –ª–æ–≥–∏–Ω–∞:**
   - –° 20 –¥–æ 50 –ø–æ–ø—ã—Ç–æ–∫ –∑–∞ 15 –º–∏–Ω—É—Ç
   - –§–∞–π–ª: `backend/src/middleware/rateLimit.ts`

2. **–î–æ–±–∞–≤–ª–µ–Ω skipSuccessfulRequests:**
   - –£—Å–ø–µ—à–Ω—ã–µ –ª–æ–≥–∏–Ω—ã –±–æ–ª—å—à–µ –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è –≤ –ª–∏–º–∏—Ç
   - –¢–æ–ª—å–∫–æ –Ω–µ—É–¥–∞—á–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è

### Frontend:
1. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏ 429:**
   - –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –§–∞–π–ª: `frontend/src/pages/Login.tsx`

2. **–£–ª—É—á—à–µ–Ω API interceptor:**
   - –õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ 429 –¥–ª—è auth –∑–∞–ø—Ä–æ—Å–æ–≤
   - –§–∞–π–ª: `frontend/src/services/api.ts`

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```typescript
export const authLimiter = rateLimit({
  windowMs: 15 * 60 * 1000, // 15 minutes
  max: process.env.NODE_ENV === 'production' ? 50 : 100, // –£–≤–µ–ª–∏—á–µ–Ω–æ —Å 20 –¥–æ 50
  skipSuccessfulRequests: true, // –£—Å–ø–µ—à–Ω—ã–µ –ª–æ–≥–∏–Ω—ã –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è
  // ...
});
```

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
```typescript
// –í Login.tsx
catch (err: ApiError) {
  if (err.response?.status === 429) {
    setError('–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–¥–æ–∂–¥–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞.');
  } else {
    setError(err.response?.data?.message || t('errors.somethingWentWrong'));
  }
}
```

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. **–û–±–Ω–æ–≤–∏—Ç—å –±—ç–∫–µ–Ω–¥ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!):**
   ```bash
   git add backend/src/middleware/rateLimit.ts
   git commit -m "fix: Increase auth rate limit to 50 and skip successful requests"
   git push origin main
   ```
   –ó–∞—Ç–µ–º –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä (Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç)

2. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã –∏–∑ `deploy-ready/`
   - –°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `–û–ë–ù–û–í–õ–ï–ù–ò–ï_–§–†–û–ù–¢–ï–ù–î–ê.md`

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–ë–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∏—Ç—Å—è!** –ù—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å `backend/src/middleware/rateLimit.ts` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–î–æ:** 20 –ø–æ–ø—ã—Ç–æ–∫ –ª–æ–≥–∏–Ω–∞ –∑–∞ 15 –º–∏–Ω—É—Ç
- **–ü–æ—Å–ª–µ:** 50 –ø–æ–ø—ã—Ç–æ–∫ –ª–æ–≥–∏–Ω–∞ –∑–∞ 15 –º–∏–Ω—É—Ç + —É—Å–ø–µ—à–Ω—ã–µ –ª–æ–≥–∏–Ω—ã –Ω–µ —Å—á–∏—Ç–∞—é—Ç—Å—è

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** $(date '+%Y-%m-%d %H:%M:%S')


