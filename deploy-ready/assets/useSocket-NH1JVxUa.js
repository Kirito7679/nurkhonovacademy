import{d as a,r,aY as i}from"./vendor-react-B4b84SyH.js";import{u}from"./index-D6PcLXw1.js";const l=()=>{const t="https://api.academy.dilmurodnurkhonov.uz/api".replace(/\/api$/,"");return t.includes("localhost")&&window.location.hostname!=="localhost"?"https://api.academy.dilmurodnurkhonov.uz":t},p=l(),k=()=>{const{token:o}=u(),s=a(),t=r.useRef(null),[c,n]=r.useState(!1);return r.useEffect(()=>{if(!o){n(!1);return}const e=i(p,{auth:{token:o}});return t.current=e,e.on("new-notification",()=>{s.invalidateQueries("notifications")}),e.on("connect",()=>{n(!0)}),e.on("disconnect",()=>{n(!1)}),e.on("error",d=>{}),()=>{e.disconnect(),n(!1)}},[o,s]),{socket:t.current,isConnected:c}};export{k as u};
