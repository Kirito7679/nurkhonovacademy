# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –∏–º–µ–Ω —Ñ–∞–π–ª–æ–≤

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ò–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —Å –∏—Å–∫–∞–∂–µ–Ω–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
- –ù–∞–ø—Ä–∏–º–µ—Ä: "ƒê¬£√ë‚Ç¨√ê¬≥√ê¬∞ 1" –≤–º–µ—Å—Ç–æ "–£—Ä–æ–∫ 1"
- –§–∞–π–ª –Ω–µ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è –∏–ª–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç—Å—è —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ò–º—è —Ñ–∞–π–ª–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –∫–æ–¥–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —á–µ—Ä–µ–∑ multer
- UTF-8 –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ Latin-1 (mojibake)
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### Backend:
1. **–£–ª—É—á—à–µ–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞:**
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ mojibake —Å–∏–º–≤–æ–ª–æ–≤ (ƒê, √ë, ‚Ç¨, √ê, ¬£)
   - –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ latin1 –≤ utf8
   - –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
   - –§–∞–π–ª: `backend/src/controllers/fileController.ts`

2. **–£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
   - `Content-Disposition: attachment; filename*=UTF-8''...`
   - –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π

3. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ ENOENT:**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏–∑ –æ–±–ª–∞—á–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

### Frontend:
1. **–£–ª—É—á—à–µ–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏:**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ mojibake
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TextDecoder –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏
   - –§–∞–π–ª: `frontend/src/pages/LessonView.tsx`

2. **–£–ª—É—á—à–µ–Ω–æ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏:**
   - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏–º–µ–Ω–∏ —Ñ–∞–π–ª–∞ –ø–µ—Ä–µ–¥ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ–º
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –¥–ª—è download –∞—Ç—Ä–∏–±—É—Ç–∞

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ mojibake
if (/[ƒê√ë‚Ç¨√ê¬£]/.test(req.file.originalname)) {
  // –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏–∑ latin1 –≤ utf8
  decodedFileName = Buffer.from(req.file.originalname, 'latin1').toString('utf8');
}

// –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
res.setHeader('Content-Disposition', `attachment; filename*=UTF-8''${encodeURIComponent(downloadFileName)}`);
```

### Frontend –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ:
```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TextDecoder
const bytes = new Uint8Array(fileName.length);
for (let i = 0; i < fileName.length; i++) {
  bytes[i] = fileName.charCodeAt(i) & 0xFF;
}
decodedFileName = new TextDecoder('utf-8', { fatal: false }).decode(bytes);
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

**–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–æ–≤:**
- –§–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π, –±—É–¥—É—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏
- –ü—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ –∏–º—è —Ñ–∞–π–ª–∞ –±—É–¥–µ—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è:**
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º
- –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ –∏–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤

---

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. **–û–±–Ω–æ–≤–∏—Ç—å –±—ç–∫–µ–Ω–¥:**
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è —É–∂–µ –∑–∞–ø—É—à–µ–Ω—ã –≤ git
   - Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç

2. **–û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥:**
   - –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã –∏–∑ `deploy-ready/`
   - –°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ `–û–ë–ù–û–í–õ–ï–ù–ò–ï_–§–†–û–ù–¢–ï–ù–î–ê.md`

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** $(date '+%Y-%m-%d %H:%M:%S')


