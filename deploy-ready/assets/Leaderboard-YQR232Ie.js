import{k as m,e as u,j as e,U as d,m as i,b8 as h,b9 as f,ag as b}from"./vendor-BwEBtozQ.js";import{u as j,a as N}from"./index-_CiEywzY.js";function v(){const{t:r}=m(),{user:s}=j(),{data:t,isLoading:n,error:c}=u("leaderboard",async()=>(await N.get("/leaderboard")).data.data,{staleTime:30*1e3,cacheTime:5*60*1e3}),o=a=>a===1?e.jsx(h,{className:"h-6 w-6 text-yellow-500"}):a===2?e.jsx(f,{className:"h-6 w-6 text-gray-400"}):a===3?e.jsx(b,{className:"h-6 w-6 text-amber-600"}):e.jsxs("span",{className:"text-lg font-bold text-neutral-600",children:["#",a]}),x=a=>a===1?"bg-gradient-to-r from-yellow-50 to-yellow-100 border-yellow-300":a===2?"bg-gradient-to-r from-gray-50 to-gray-100 border-gray-300":a===3?"bg-gradient-to-r from-amber-50 to-amber-100 border-amber-300":"bg-white border-neutral-200";return n?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(10)].map((a,l)=>e.jsx("div",{className:"h-20 bg-neutral-200 rounded-lg"},l))})})}):c?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:e.jsx("p",{className:"text-red-600",children:r("error.loading",{defaultValue:"Ошибка загрузки данных"})})})})}):e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gradient mb-2",children:r("leaderboard.title",{defaultValue:"Таблица лидеров"})}),e.jsx("p",{className:"text-neutral-600",children:r("leaderboard.subtitle",{defaultValue:"Студенты с наибольшим количеством коинов"})})]}),s&&t?.userRank&&e.jsx("div",{className:"bg-primary-50 border-2 border-primary-300 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-primary flex items-center justify-center text-white font-bold",children:s.avatarUrl?e.jsx("img",{src:s.avatarUrl,alt:`${s.firstName} ${s.lastName}`,className:"w-full h-full rounded-full object-cover"}):e.jsx(d,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-semibold text-neutral-900",children:[s.firstName," ",s.lastName]}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[r("leaderboard.yourRank",{defaultValue:"Ваш рейтинг"}),": #",t.userRank]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-xl font-bold text-neutral-900",children:s.coins||0})]})]})}),e.jsx("div",{className:"space-y-3",children:t?.leaderboard&&t.leaderboard.length>0?t.leaderboard.map(a=>{const l=s?.id===a.id;return e.jsx("div",{className:`${x(a.rank)} border-2 rounded-lg p-4 transition-all hover:shadow-lg ${l?"ring-2 ring-primary-500":""}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:"flex items-center justify-center w-12",children:o(a.rank)}),e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-gradient-primary flex items-center justify-center",children:a.avatarUrl?e.jsx("img",{src:a.avatarUrl,alt:`${a.firstName} ${a.lastName}`,className:"w-full h-full object-cover"}):e.jsx(d,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:`font-semibold ${l?"text-primary-700":"text-neutral-900"}`,children:[a.firstName," ",a.lastName,l&&e.jsx("span",{className:"ml-2 text-xs bg-primary-500 text-white px-2 py-0.5 rounded",children:r("leaderboard.you",{defaultValue:"Вы"})})]}),e.jsxs("p",{className:"text-sm text-neutral-600",children:[a.completedLessons," ",r("leaderboard.lessonsCompleted",{defaultValue:"уроков завершено"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-xl font-bold text-neutral-900",children:a.coins})]})]})},a.id)}):e.jsx("div",{className:"bg-neutral-50 border border-neutral-200 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-neutral-600",children:r("leaderboard.empty",{defaultValue:"Пока нет участников в таблице лидеров"})})})}),t&&t.totalParticipants>0&&e.jsx("div",{className:"mt-6 text-center text-sm text-neutral-600",children:r("leaderboard.totalParticipants",{defaultValue:"Всего участников: {{count}}",count:t.totalParticipants})})]})})}export{v as default};
