import{u,f as h,r as p,h as j,k as b,j as e,$ as N,aH as y,H as f}from"./vendor-react-BKQy8cua.js";import{a as m}from"./index-B1iTD4yI.js";import{E as v}from"./ErrorModal-DDNSR7rT.js";import"./vendor-other-Bzl34R3H.js";import"./vendor-network-CoR7wtyb.js";import"./vendor-i18n-DHwuzpMN.js";import"./vendor-state-BcnB54Y8.js";function M(){const t=u(),i=h(),[c,d]=p.useState({isOpen:!1,message:""}),{data:r,isLoading:x}=j("teacherPaymentStatus",async()=>(await m.get("/payments/teacher/status")).data.data),a=b(async s=>(await m.post("/payments/teacher/process",s)).data.data,{onSuccess:()=>{i.invalidateQueries("teacherPaymentStatus"),i.invalidateQueries("user"),t("/teacher/courses")},onError:s=>{var n,o;d({isOpen:!0,message:((o=(n=s.response)==null?void 0:n.data)==null?void 0:o.message)||"Ошибка при обработке оплаты"})}}),l=s=>{a.mutate({paymentMethod:s,amount:1e4})};return x?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block relative",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-200 border-t-primary-500"})}),e.jsx("p",{className:"mt-4 text-neutral-600",children:"Загрузка..."})]}):r!=null&&r.isPaidTeacher?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"card p-8 text-center",children:[e.jsx(N,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-neutral-900 mb-2",children:"Регистрация оплачена"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:"Вы можете создавать курсы и классы"}),e.jsx("button",{onClick:()=>t("/teacher/courses"),className:"btn-primary",children:"Перейти к курсам"})]})}):e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("div",{className:"relative mb-8 animate-slide-in",children:e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-5xl font-bold text-gradient",children:"Оплата регистрации учителя"})}),e.jsxs("div",{className:"card p-8",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx(y,{className:"h-8 w-8 text-primary-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-neutral-900",children:"Для создания курсов и классов"}),e.jsx("p",{className:"text-sm text-neutral-600",children:"Необходимо оплатить регистрацию учителя"})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(f,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 mb-1",children:"Важная информация"}),e.jsx("p",{className:"text-sm text-yellow-700",children:"После оплаты вы получите возможность создавать неограниченное количество курсов и классов. Оплата производится один раз."})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-neutral-200 rounded-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-neutral-900",children:"Стоимость регистрации"}),e.jsx("span",{className:"text-2xl font-bold text-primary-600",children:"10 000 сум"})]}),e.jsx("p",{className:"text-sm text-neutral-600 mb-6",children:"Единоразовая оплата для активации аккаунта учителя"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>l("CARD"),disabled:a.isLoading,className:"w-full btn-primary disabled:opacity-50 disabled:cursor-not-allowed",children:a.isLoading?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"⟳"}),"Обработка..."]}):"Оплатить картой"}),e.jsx("button",{onClick:()=>l("PAYPAL"),disabled:a.isLoading,className:"w-full btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Оплатить через PayPal"}),e.jsx("button",{onClick:()=>l("OTHER"),disabled:a.isLoading,className:"w-full btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Другой способ оплаты"})]})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("button",{onClick:()=>t(-1),className:"text-sm text-neutral-600 hover:text-neutral-900",children:"← Назад"})})]}),e.jsx(v,{isOpen:c.isOpen,message:c.message,onClose:()=>d({isOpen:!1,message:""})})]})}export{M as default};
