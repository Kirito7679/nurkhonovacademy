import{k as b,d as g,r as n,V as j,j as e,L as y,$ as v,a0 as w,a1 as l}from"./vendor-BvlDnYZi.js";import{u as X,L as S,a as k}from"./index-DGEZIldP.js";const F=/^(\+?998)?[0-9]{9}$/,L=/^(?=.*[A-Za-z])(?=.*\d).{6,}$/,A=w({firstName:l().min(1,"Имя обязательно").max(50,"Имя слишком длинное"),lastName:l().min(1,"Фамилия обязательна").max(50,"Фамилия слишком длинная"),phone:l().min(10,"Номер телефона должен содержать минимум 10 символов").max(15,"Номер телефона слишком длинный").regex(F,"Неверный формат номера телефона. Используйте формат: +998XXXXXXXXX или 998XXXXXXXXX"),password:l().min(6,"Пароль должен содержать минимум 6 символов").regex(L,"Пароль должен содержать буквы и цифры")});function R(){const{t:a}=b(),c=g(),{setAuth:p}=X(),[o,r]=n.useState(""),[m,d]=n.useState(!1),{register:i,handleSubmit:x,formState:{errors:s}}=j({resolver:v(A)}),h=async u=>{r(""),d(!0);try{const t=await k.post("/auth/register",u);if(t.data.success&&t.data.data){const{user:f,token:N}=t.data.data;p(f,N),c("/dashboard")}}catch(t){t.isNetworkError?r("Ошибка сети. Проверьте подключение к интернету и попробуйте снова."):t.isTimeout?r("Превышено время ожидания. Попробуйте снова."):r(t.response?.data?.message||a("errors.somethingWentWrong"))}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50/50 to-emerald-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"relative inline-flex items-center justify-center mb-4",children:e.jsx(S,{className:"h-12 md:h-16"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gradient",children:a("auth.register")}),e.jsxs("p",{className:"mt-2 text-center text-sm text-primary-700",children:[a("auth.alreadyHaveAccount")," ",e.jsx(y,{to:"/login",className:"font-semibold text-primary-600 hover:text-primary-800 transition-colors underline decoration-2 underline-offset-2",children:a("auth.login")})]})]}),e.jsx("div",{className:"card p-8 shadow-education",children:e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x(h),children:[o&&e.jsx("div",{className:"bg-red-50 border-2 border-red-300 text-red-800 px-4 py-3 rounded-lg font-medium",children:o}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"firstName",className:"block text-sm font-semibold text-primary-800 mb-2",children:a("auth.firstName")}),e.jsx("input",{...i("firstName"),id:"firstName",type:"text",autoComplete:"given-name",className:"input-field",placeholder:a("auth.firstName"),"aria-invalid":s.firstName?"true":"false","aria-describedby":s.firstName?"firstName-error":void 0}),s.firstName&&e.jsx("p",{id:"firstName-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:s.firstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"lastName",className:"block text-sm font-semibold text-primary-800 mb-2",children:a("auth.lastName")}),e.jsx("input",{...i("lastName"),id:"lastName",type:"text",autoComplete:"family-name",className:"input-field",placeholder:a("auth.lastName"),"aria-invalid":s.lastName?"true":"false","aria-describedby":s.lastName?"lastName-error":void 0}),s.lastName&&e.jsx("p",{id:"lastName-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:s.lastName.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-primary-800 mb-2",children:a("auth.phone")}),e.jsx("input",{...i("phone"),id:"phone",type:"text",autoComplete:"tel",className:"input-field",placeholder:"+998901234567","aria-invalid":s.phone?"true":"false","aria-describedby":s.phone?"phone-error":void 0}),s.phone&&e.jsx("p",{id:"phone-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:s.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-primary-800 mb-2",children:a("auth.password")}),e.jsx("input",{...i("password"),id:"password",type:"password",autoComplete:"new-password",className:"input-field",placeholder:a("auth.password"),"aria-invalid":s.password?"true":"false","aria-describedby":s.password?"password-error":void 0}),s.password&&e.jsx("p",{id:"password-error",className:"mt-1 text-sm text-red-600 font-medium",role:"alert",children:s.password.message})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:m,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed text-base py-3.5",children:a(m?"common.loading":"auth.register")})})]})})]})})}export{R as default};
