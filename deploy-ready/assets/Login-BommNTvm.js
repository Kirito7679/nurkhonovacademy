import{k as v,u as S,r as i,H as E,j as e,L as k,J as L,K as A,P as C,V as T,W as f}from"./vendor-react-B4b84SyH.js";import{u as F,L as H,a as P}from"./index-D6PcLXw1.js";const W=T({phone:f().min(1,"Номер телефона обязателен"),password:f().min(1,"Пароль обязателен")});function I(){const{t:s}=v(),l=S(),{setAuth:b}=F(),[d,o]=i.useState(""),[c,m]=i.useState(!1),[a,j]=i.useState(!1),{register:p,handleSubmit:y,formState:{errors:r}}=E({resolver:C(W)}),g=async N=>{var h,x,u;o(""),m(!0);try{const t=await P.post("/auth/login",N);if(t.data.success&&t.data.data){const{user:n,token:w}=t.data.data;b(n,w),n.role==="TEACHER"||n.role==="ADMIN"?l("/teacher/dashboard"):l("/dashboard")}}catch(t){((h=t.response)==null?void 0:h.status)===429?o("Слишком много попыток входа. Пожалуйста, подождите несколько минут и попробуйте снова."):o(((u=(x=t.response)==null?void 0:x.data)==null?void 0:u.message)||s("errors.somethingWentWrong"))}finally{m(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50/50 to-emerald-50 py-12 px-4 sm:px-6 lg:px-8 relative",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"relative inline-flex items-center justify-center mb-4",children:e.jsx(H,{className:"h-12 md:h-16"})}),e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gradient",children:s("auth.login")}),e.jsxs("p",{className:"mt-2 text-center text-sm text-primary-700",children:[s("auth.dontHaveAccount")," ",e.jsx(k,{to:"/register",className:"font-semibold text-primary-600 hover:text-primary-800 transition-colors underline decoration-2 underline-offset-2",children:s("auth.register")})]})]}),e.jsx("div",{className:"card p-8 shadow-education",children:e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:y(g),children:[d&&e.jsx("div",{className:"bg-red-50 border-2 border-red-300 text-red-800 px-4 py-3 rounded-lg font-medium",children:d}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"phone",className:"block text-sm font-semibold text-primary-800 mb-2",children:s("auth.phone")}),e.jsx("input",{...p("phone"),id:"phone",type:"text",autoComplete:"tel",className:"input-field",placeholder:"+998901234567"}),r.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-medium",children:r.phone.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-primary-800 mb-2",children:s("auth.password")}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...p("password"),id:"password",type:a?"text":"password",autoComplete:"current-password",className:"input-field pr-12",placeholder:s("auth.password")}),e.jsx("button",{type:"button",onClick:()=>j(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-primary-400 hover:text-primary-600 transition-colors focus:outline-none","aria-label":s("auth.password"),children:a?e.jsx(L,{className:"h-5 w-5"}):e.jsx(A,{className:"h-5 w-5"})})]}),r.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600 font-medium",children:r.password.message})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:c,className:"btn-primary w-full disabled:opacity-50 disabled:cursor-not-allowed text-base py-3.5",children:s(c?"common.loading":"auth.login")})})]})})]})})}export{I as default};
