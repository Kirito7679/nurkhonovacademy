# ‚òÅÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Storage (–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Cloudinary)

## ‚úÖ –ü–æ—á–µ–º—É Supabase:

- ‚úÖ **–î–æ—Å—Ç—É–ø–µ–Ω –≤ –£–∑–±–µ–∫–∏—Å—Ç–∞–Ω–µ**
- ‚úÖ **1 GB –±–µ—Å–ø–ª–∞—Ç–Ω–æ** (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞)
- ‚úÖ **2 GB —Ç—Ä–∞—Ñ–∏–∫–∞/–º–µ—Å—è—Ü**
- ‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π (–ª—é–±—ã–µ —Ñ–∞–π–ª—ã)
- ‚úÖ –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π CDN
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∫–∞—Ä—Ç—ã

## üìã –®–∞–≥ 1: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ Supabase

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [https://supabase.com](https://supabase.com)
2. –ù–∞–∂–º–∏—Ç–µ "Start your project"
3. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ GitHub (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç
4. **–ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫—Ä–µ–¥–∏—Ç–Ω–∞—è –∫–∞—Ä—Ç–∞!**

## üèóÔ∏è –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1. –ù–∞–∂–º–∏—Ç–µ "New Project"
2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name**: `nurkhonov-academy` (–∏–ª–∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ)
   - **Database Password**: —Å–æ–∑–¥–∞–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å (—Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –µ–≥–æ!)
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ–≥–∏–æ–Ω
3. –ù–∞–∂–º–∏—Ç–µ "Create new project"
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã (—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞)

## üîë –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

1. –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ **Settings** (—à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞ –≤–Ω–∏–∑—É —Å–ª–µ–≤–∞)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **API**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Project URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://xyz.supabase.co`)
   - **anon public key** (–¥–ª–∏–Ω–Ω—ã–π –∫–ª—é—á, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)
   - **service_role key** (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)

## üì¶ –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ Storage Bucket

1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –æ—Ç–∫—Ä–æ–π—Ç–µ **Storage**
2. –ù–∞–∂–º–∏—Ç–µ "New bucket"
3. –°–æ–∑–¥–∞–π—Ç–µ –¥–≤–∞ bucket:

   **Bucket 1: `avatars`**
   - Name: `avatars`
   - Public: ‚úÖ (—á—Ç–æ–±—ã —Ñ–∞–π–ª—ã –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ URL)
   - File size limit: 5 MB
   - Allowed MIME types: `image/jpeg,image/png,image/gif,image/webp`

   **Bucket 2: `lessons`**
   - Name: `lessons`
   - Public: ‚úÖ
   - File size limit: 50 MB
   - Allowed MIME types: (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤)

## ‚öôÔ∏è –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª–∏—Ç–∏–∫ –¥–æ—Å—Ç—É–ø–∞

1. –î–ª—è –∫–∞–∂–¥–æ–≥–æ bucket –æ—Ç–∫—Ä–æ–π—Ç–µ **Policies**
2. –ù–∞–∂–º–∏—Ç–µ "New Policy"
3. –í—ã–±–µ—Ä–∏—Ç–µ "For full customization"
4. –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É:

**–î–ª—è `avatars`:**
```sql
-- Allow public read access
CREATE POLICY "Public Access" ON storage.objects FOR SELECT USING (bucket_id = 'avatars');

-- Allow authenticated users to upload
CREATE POLICY "Authenticated Upload" ON storage.objects FOR INSERT WITH CHECK (bucket_id = 'avatars' AND auth.role() = 'authenticated');

-- Allow users to update their own files
CREATE POLICY "User Update" ON storage.objects FOR UPDATE USING (bucket_id = 'avatars' AND auth.role() = 'authenticated');

-- Allow users to delete their own files
CREATE POLICY "User Delete" ON storage.objects FOR DELETE USING (bucket_id = 'avatars' AND auth.role() = 'authenticated');
```

**–î–ª—è `lessons`:**
```sql
-- Allow public read access
CREATE POLICY "Public Access" ON storage.objects FOR SELECT USING (bucket_id = 'lessons');

-- Allow authenticated users to upload
CREATE POLICY "Authenticated Upload" ON storage.objects FOR INSERT WITH CHECK (bucket_id = 'lessons' AND auth.role() = 'authenticated');
```

## üîß –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ Railway

–î–æ–±–∞–≤—å—Ç–µ –≤ Railway Variables:

```
SUPABASE_URL=–≤–∞—à_project_url
SUPABASE_ANON_KEY=–≤–∞—à_anon_key
SUPABASE_SERVICE_KEY=–≤–∞—à_service_role_key
```

## üìù –®–∞–≥ 7: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞–∫–µ—Ç–∞

```bash
cd backend
npm install @supabase/supabase-js
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ —Ñ–∞–π–ª—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ Supabase Storage.

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: Supabase Storage –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥, —á–µ–º Cloudinary. –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Supabase API.

